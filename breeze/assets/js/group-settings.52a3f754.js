"use strict";(self["webpackChunkbreeze"]=self["webpackChunkbreeze"]||[]).push([[223],{39494:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(82234);function l(e,t,a,l,s,o){return(0,i.openBlock)(),(0,i.createElementBlock)("button",{onClick:t[0]||(t[0]=(...e)=>l.copy&&l.copy(...e))},[(0,i.renderSlot)(e.$slots,"default")])}var s=a(76109),o=a.n(s),n={name:"Copy",props:{toCopy:{type:String,default:""}},emits:["copy"],setup(e,t){const{toClipboard:a}=o()(),i=async()=>{try{await a(e.toCopy),t.emit("copy",e.toCopy,!0)}catch(i){console.error(i),t.emit("copy",e.toCopy,!1)}};return{copy:i}}},d=a(83744);const r=(0,d.Z)(n,[["render",l]]);var c=r},97200:function(e,t,a){a.d(t,{Z:function(){return r}});var i=a(82234);const l=(0,i.createElementVNode)("div",null,"Sticky Top",-1);function s(e,t,a,s,o,n){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{style:(0,i.normalizeStyle)({height:o.height+"px",zIndex:a.zIndex})},[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(a.className),style:(0,i.normalizeStyle)({top:o.isSticky?a.top+"px":"",zIndex:a.zIndex,position:o.position,width:o.width,height:o.height+"px"})},[(0,i.renderSlot)(e.$slots,"default",{},(()=>[l]))],6)],4)}var o={name:"Sticky",props:{top:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String,default:""}},data(){return{active:!1,position:"",width:void 0,height:void 0,isSticky:!1}},mounted(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize)},activated(){this.handleScroll()},unmounted(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize)},methods:{sticky(){this.active||(this.position="fixed",this.active=!0,this.width=this.width+"px",this.isSticky=!0)},handleReset(){this.active&&this.reset()},reset(){this.position="",this.width="auto",this.active=!1,this.isSticky=!1},handleScroll(){const e=this.$el.getBoundingClientRect().width;this.width=e||"auto";const t=this.$el.getBoundingClientRect().top;t<this.top?this.sticky():this.handleReset()},handleResize(){this.isSticky&&(this.width=this.$el.getBoundingClientRect().width+"px")}}},n=a(83744);const d=(0,n.Z)(o,[["render",s]]);var r=d},9062:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var i=a(82234);const l={class:"picker-container"},s={class:"picker-content"},o={key:0,class:"image-upload-area"},n={class:"image-upload-text"},d={key:1},r={class:"cropper-container"},c={class:"vertical-buttons"},h={class:"preview-container"},p={class:"dialog-footer"};function u(e,t,a,u,m,g){const w=(0,i.resolveComponent)("font-awesome-icon"),V=(0,i.resolveComponent)("el-upload"),C=(0,i.resolveComponent)("cropper"),N=(0,i.resolveComponent)("preview"),f=(0,i.resolveComponent)("el-button");return(0,i.openBlock)(),(0,i.createElementBlock)("div",l,[(0,i.createElementVNode)("div",s,[m.files.length?((0,i.openBlock)(),(0,i.createElementBlock)("div",d,[(0,i.createElementVNode)("div",r,[(0,i.createVNode)(C,{ref:"cropper",class:"cropper",src:m.files[0],"auto-zoom":a.cropperAutoZoom,"stencil-props":{movable:a.cropperMovable,scalable:a.cropperScalable,aspectRatio:a.cropperRatio,previewClass:a.roundPreview?"circle-stencil-preview":""},"image-restriction":"stencil","background-class":"cropper-background","stencil-component":a.roundPreview?e.CircleStencil:e.RectangleStencil,onChange:g.onChange},null,8,["src","auto-zoom","stencil-props","stencil-component","onChange"]),(0,i.createElementVNode)("div",c,[(0,i.createElementVNode)("div",{class:"square-button",title:"Flip Horizontal",onClick:t[0]||(t[0]=e=>g.flip(!0,!1))},[(0,i.createVNode)(w,{icon:["fas","arrows-alt-h"],size:"1x",style:{color:"white"}})]),(0,i.createElementVNode)("div",{class:"square-button",title:"Flip Vertical",onClick:t[1]||(t[1]=e=>g.flip(!1,!0))},[(0,i.createVNode)(w,{icon:["fas","arrows-alt-v"],size:"1x",style:{color:"white"}})]),(0,i.createElementVNode)("div",{class:"square-button",title:"Rotate Clockwise",onClick:t[2]||(t[2]=e=>g.rotate(90))},[(0,i.createVNode)(w,{icon:["fas","redo"],size:"1x",style:{color:"white"}})]),(0,i.createElementVNode)("div",{class:"square-button",title:"Rotate Counter-Clockwise",onClick:t[3]||(t[3]=e=>g.rotate(-90))},[(0,i.createVNode)(w,{icon:["fas","undo"],size:"1x",style:{color:"white"}})])])]),(0,i.createElementVNode)("div",h,[(0,i.createVNode)(N,{ref:"preview",class:(0,i.normalizeClass)(["preview",{round:a.roundPreview}]),image:m.result.image,height:a.previewHeight,width:g.calcPreviewWidth,coordinates:m.result.coordinates},null,8,["image","height","width","class","coordinates"])])])):((0,i.openBlock)(),(0,i.createElementBlock)("div",o,[(0,i.createVNode)(w,{icon:["fas","download"],size:"4x",style:{color:"gray"},class:"image-upload-icon"}),(0,i.createElementVNode)("span",n,(0,i.toDisplayString)(e.$t("clickOrDragFile")),1),(0,i.createVNode)(V,{ref:"upload",action:"#",name:"image",class:"image-upload-button",accept:"image/png,image/gif,image/jpeg,image/jpg,image/webp",drag:!0,multiple:!1,"auto-upload":!1,"on-change":g.selectedFileChange,"before-upload":g.beforeImageUpload},null,8,["on-change","before-upload"])])),(0,i.createElementVNode)("div",{class:"picker-action",style:(0,i.normalizeStyle)(`background: ${e.pickByTheme("#ffffff","#282828")}`)},[(0,i.createElementVNode)("span",p,[(0,i.createVNode)(f,{onClick:t[4]||(t[4]=e=>g.cancel())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(m.files.length?e.$t("back"):e.$t("close")),1)])),_:1}),m.files.length?((0,i.openBlock)(),(0,i.createBlock)(f,{key:0,type:"primary",onClick:t[5]||(t[5]=e=>g.save())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("save")),1)])),_:1})):(0,i.createCommentVNode)("",!0)])],4)])])}var m=a(75979),g={name:"ImagePicker",components:{Cropper:m.Cropper,Preview:m.Preview,CircleStencil:m.CircleStencil,RectangleStencil:m.RectangleStencil},inheritAttrs:!1,props:{cropperAutoZoom:{type:Boolean,default:!0},cropperScalable:{type:Boolean,default:!1},cropperMovable:{type:Boolean,default:!1},cropperRatio:{type:Number,default:null},roundPreview:{type:Boolean,default:!1},previewWidth:{type:Number,default:null},previewHeight:{type:Number,default:120}},emits:["croppedFileChange","selectedFileChange","save","cancel"],data(){return{secondaryColor:this.secondaryColor,files:[],result:{coordinates:null,image:null}}},computed:{calcPreviewWidth(){return this.previewWidth?this.previewWidth:this.result&&this.result.coordinates?this.result.coordinates.width/this.result.coordinates.height*this.previewHeight:this.previewHeight}},watch:{files:{handler(e,t){this.$emit("selectedFileChange",e[0]||null)}}},methods:{onChange({coordinates:e,image:t}){this.result={coordinates:e,image:t};const{canvas:a}=this.$refs.cropper.getResult();this.$emit("croppedFileChange",this.result,a.toDataURL())},inputFilter(e,t,a){if(e&&!t&&!/\.(gif|jpg|jpeg|png|webp)$/i.test(e.name))return this.$toast.error(this.$t("invalidFile")),a();if(e&&(!t||e.file!==t.file)){e.url="";const t=window.URL||window.webkitURL;t&&t.createObjectURL&&(e.url=t.createObjectURL(e.file))}},flip(e,t){this.$refs.cropper.imageTransforms.rotate%180!==0?this.$refs.cropper.flip(!e,!t):this.$refs.cropper.flip(e,t)},rotate(e){this.$refs.cropper.rotate(e)},beforeImageUpload(e){const t="image/jpeg"===e.type||"image/jpg",a=e.size/1024/1024<5;return t||this.$message.error(this.$t("uploadImageFormatWarning")),a||this.$message.error(this.$t("uploadFileSizeWarning",[5])),t&&a},selectedFileChange(e,t){var a=new FileReader;a.readAsDataURL(e.raw),a.onload=e=>{this.files=[this.result]}},cancel(){this.files.length||this.$emit("cancel"),this.files=[]},save(){const{canvas:e}=this.$refs.cropper.getResult();this.$emit("save",this.result,e.toDataURL())}}},w=a(83744);const V=(0,w.Z)(g,[["render",u],["__scopeId","data-v-579cc038"]]);var C=V;const N={class:"img-preview-container text-center"},f={class:"card-header"},y={class:"text-center"},x={key:0,class:"el-form-item__error"};function b(e,t,a,l,s,o){const n=(0,i.resolveComponent)("el-avatar"),d=(0,i.resolveComponent)("Delete"),r=(0,i.resolveComponent)("el-icon"),c=(0,i.resolveComponent)("el-card"),h=(0,i.resolveComponent)("el-col"),p=(0,i.resolveComponent)("el-button"),u=(0,i.resolveComponent)("el-input"),m=(0,i.resolveComponent)("el-form-item"),g=(0,i.resolveComponent)("font-awesome-icon"),w=(0,i.resolveComponent)("el-form"),V=(0,i.resolveComponent)("el-row"),b=C,v=(0,i.resolveComponent)("el-dialog");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(c,{shadow:"never"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(V,{gutter:40},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{shadow:"hover"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",N,[(0,i.createElementVNode)("div",{class:"img-preview",onClick:t[0]||(t[0]=e=>s.pickerVisible=!0)},[s.account.avatar?((0,i.openBlock)(),(0,i.createBlock)(n,{key:0,size:125,src:e.resolveMediaLink(s.account.avatar)},null,8,["src"])):((0,i.openBlock)(),(0,i.createBlock)(n,{key:1,size:125},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(o.getNameInitials(e.userData&&e.userData.name||"")),1)])),_:1}))])]),s.account.avatar?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:"text-center img-preview-delete",onClick:t[1]||(t[1]=e=>o.clearAvatar())},[(0,i.createVNode)(r,{title:e.$t("clear")},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d)])),_:1},8,["title"]),(0,i.createTextVNode)(" "+(0,i.toDisplayString)(e.$t("clear")),1)])):(0,i.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,i.createVNode)(h,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{shadow:"hover"},{header:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",f,[(0,i.createElementVNode)("h3",null,(0,i.toDisplayString)(e.$t("accountInfo")),1),(0,i.createVNode)(p,{disabled:o.updateBtnDisabled,type:"primary",plain:"",onClick:t[2]||(t[2]=e=>o.updateAccountInfo())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("update")),1)])),_:1},8,["disabled"])])])),default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",y,[(0,i.createVNode)(w,{ref:"accountForm","label-position":"left","label-width":"150px",model:s.account},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{prop:"uid",label:e.$t("id")},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{modelValue:s.account.uid,"onUpdate:modelValue":t[3]||(t[3]=e=>s.account.uid=e),placeholder:e.$t("id")},null,8,["modelValue","placeholder"]),s.isUidValid?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",x,(0,i.toDisplayString)(e.$t("idUnavailable")),1))])),_:1},8,["label"]),(0,i.createVNode)(m,{prop:"name",label:e.$t("name")},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{modelValue:s.account.name,"onUpdate:modelValue":t[4]||(t[4]=e=>s.account.name=e),placeholder:e.$t("name")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,i.createVNode)(m,{prop:"password",label:e.$t("password")},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{modelValue:s.account.password,"onUpdate:modelValue":t[5]||(t[5]=e=>s.account.password=e),placeholder:s.passwordPlaceholder,disabled:s.disablePasswordInput,type:"password"},null,8,["modelValue","placeholder","disabled"]),(0,i.createElementVNode)("span",{class:"edit-pwd",onClick:t[6]||(t[6]=(...e)=>o.togglePasswordInput&&o.togglePasswordInput(...e))},[(0,i.createVNode)(g,{icon:"pen"})])])),_:1},8,["label"]),(0,i.createVNode)(m,{prop:"email",label:e.$t("email")},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{modelValue:s.account.email,"onUpdate:modelValue":t[7]||(t[7]=e=>s.account.email=e),placeholder:e.$t("email"),type:"email"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(v,{modelValue:s.pickerVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>s.pickerVisible=e),"destroy-on-close":"",top:"1vh"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(b,{"cropper-ratio":s.pickerRatio,"round-preview":s.pickerRoundPreview,onCancel:t[8]||(t[8]=e=>s.pickerVisible=!1),onSave:o.saveAvatar},null,8,["cropper-ratio","round-preview","onSave"])])),_:1},8,["modelValue"])],64)}var v=a(11165),_=a(92829),S=a(38855),$=a(20747),k=a(115),E=a.n(k),D=a(21101),I={name:"AccountSettings",mixins:[S.Z],data(){return{account:{uid:"",name:"",email:"",avatar:"",password:""},isUidValid:!0,disablePasswordInput:!0,passwordPlaceholder:"●●●●●●●●●●●●●●",currentStoFolder:"avatars",pickerRatio:null,pickerVisible:!1,pickerRoundPreview:!0,currentPickerLabel:null}},computed:{...(0,D.mapState)({userData:e=>e.session.userData}),updateBtnDisabled(){return this.userData&&this.disablePasswordInput&&this.account.uid==this.userData.uid&&this.account.name==this.userData.name&&this.account.email==this.userData.email}},watch:{"account.uid":"checkUid"},created(){this.account.uid=this.userData.uid,this.account.name=this.userData.name,this.account.email=this.userData.email,this.account.avatar=this.userData.avatar},methods:{...(0,D.mapMutations)({updateUserData:"session/updateUserData"}),...(0,D.mapActions)({checkUser:"user/checkUser",getUserByCredentials:"authentication/getUserByCredentials"}),getNameInitials:_.Jt,togglePasswordInput(){this.account.password="",this.disablePasswordInput=!this.disablePasswordInput,this.passwordPlaceholder=this.disablePasswordInput?"●●●●●●●●●●●●●●":this.$t("password")},async checkUid(){this.account.uid=E().sanitize(this.account.uid.toLowerCase());const e=await this.checkUser(this.account.uid);this.isUidValid=""===this.account.uid||this.userData.uid===this.account.uid||e.success&&!e.data},async updateAccountInfo(){this.account.uid?this.account.name?this.disablePasswordInput||this.account.password?!this.disablePasswordInput&&this.account.password<6?this.$message.error(this.$t("shortPassword")):(await this.checkUid(),this.isUidValid?this.disablePasswordInput?this.executeUpdate():this.$prompt(this.$t("provideCurrentPassword"),this.$t("confirmation"),{inputPlaceholder:this.$t("password"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),inputType:"password"}).then((async({value:e})=>{if(e){const t=await this.getUserByCredentials({username:this.userData.uid,password:e});t.success?t.data.username&&t.data.password&&t.data.user?this.executeUpdate(!0):this.$message.error(this.$t("wrongPassword")):this.$message.error(this.$t("anErrorOccured"))}})).catch((()=>{})):this.$message.error(this.$t("idUnavailable"))):this.$message.error(this.$t("passwordRequired")):this.$message.error(this.$t("nameRequired")):this.$message.error(this.$t("idRequired"))},async executeUpdate(e=!1){const t={};if(this.account.uid!==this.userData.uid&&(t["uid"]=this.account.uid),this.account.name!==this.userData.name&&(t["name"]=this.account.name),this.account.email!==this.userData.email&&(t["email"]=this.account.email),e&&(t["password"]=this.account.password),!this.$_.isEmpty(t)){const a=await this.updateItemInDB({context:$.A,id:this.userData.id,data:t});if(a.success){this.$message.success(this.$t("success"));const t=this.userData;t.uid=this.account.uid,t.name=this.account.name,t.email=this.account.email,e&&this.togglePasswordInput(),this.updateUserData(t)}else this.$message.error(this.$t("anErrorOccured"))}},async updateAvatar(e=""){const t=await this.updateItemInDB({context:$.A,id:this.userData.id,data:{avatar:e}});if(t.success){this.$message.success(this.$t("success"));const t=this.userData;t.avatar=e,this.updateUserData(t)}else this.$message.error(this.$t("anErrorOccured"))},async saveAvatar(e,t){var a=(0,_.Bo)(t,{filename:this.$uuidv4()+".png",type:"image/png"});a=await(0,_.hv)(a,{maxSizeMB:1});const i=new FormData;i.append("folder",this.currentStoFolder),i.append("file",a),this.axios.post(v.STORAGE_API_BASE_URL,i,{headers:v.API_REQUEST_HEADERS}).then((async e=>{const t="root/"+this.currentStoFolder+"/"+a.name;await this.updateAvatar(t),this.account.avatar=t,this.pickerVisible=!1})).catch((e=>{this.$message.error(this.$t("anErrorOccured"))}))},clearAvatar(){this.account.avatar="",this.updateAvatar()}}};const B=(0,w.Z)(I,[["render",b],["__scopeId","data-v-595baf82"]]);var A=B},88201:function(e,t,a){a.r(t),a.d(t,{default:function(){return Jt}});var i=a(82234);const l={class:"tabs-card-container"};function s(e,t,a,s,o,n){const d=(0,i.resolveComponent)("general"),r=(0,i.resolveComponent)("el-tab-pane"),c=(0,i.resolveComponent)("medias"),h=(0,i.resolveComponent)("notifications"),p=(0,i.resolveComponent)("modules"),u=(0,i.resolveComponent)("ui-editor"),m=(0,i.resolveComponent)("json-editor"),g=(0,i.resolveComponent)("template-info"),w=(0,i.resolveComponent)("advanced"),V=(0,i.resolveComponent)("el-tabs");return(0,i.openBlock)(),(0,i.createElementBlock)("div",l,[(0,i.createVNode)(V,{modelValue:o.currentTab,"onUpdate:modelValue":t[0]||(t[0]=e=>o.currentTab=e),"tab-position":"top",type:"border-card",class:"tabs-card",onTabClick:n.handleClick},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{label:e.$t("general"),name:"general"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d)])),_:1},8,["label"]),(0,i.createVNode)(r,{label:e.$t("medias"),name:"medias"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c)])),_:1},8,["label"]),(0,i.createVNode)(r,{label:e.$t("notifications"),name:"notifications"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h)])),_:1},8,["label"]),(0,i.createVNode)(r,{label:e.$t("modules"),name:"modules"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p)])),_:1},8,["label"]),e.devMode&&e.getUserSectionScope("EDITOR_SECTION")?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,label:e.$t("visualEditor"),name:"ui-editor"},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(),(0,i.createBlock)(u,{key:o.currentTab+"A"}))])),_:1},8,["label"])):(0,i.createCommentVNode)("",!0),e.devMode&&e.getUserSectionScope("EDITOR_SECTION")?((0,i.openBlock)(),(0,i.createBlock)(r,{key:1,label:e.$t("codeEditor"),name:"json-editor"},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(),(0,i.createBlock)(m,{key:o.currentTab+"B"}))])),_:1},8,["label"])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(r,{label:e.$t("template"),name:"template"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(g)])),_:1},8,["label"]),(0,i.createVNode)(r,{label:e.$t("advanced"),name:"advanced"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(w)])),_:1},8,["label"])])),_:1},8,["modelValue","onTabClick"])])}a(57658);var o=a(11165),n=a(39355),d=a(14340),r=a(48527),c=a(31567),h=a(38855),p=a(2258),u=a(21101);const m={class:"text-left"},g={class:"text-right"},w={class:"text-left"},V={class:"text-right"},C={class:"text-left"},N={class:"text-right"},f={class:"text-left"},y={class:"text-right"},x={class:"text-left"},b={class:"text-right"},v={class:"text-left"},_={class:"text-right"},S={class:"text-left"},$={class:"text-right"};function k(e,t,a,l,s,o){const n=(0,i.resolveComponent)("el-col"),d=(0,i.resolveComponent)("el-button"),r=(0,i.resolveComponent)("el-input"),c=(0,i.resolveComponent)("el-row"),h=(0,i.resolveComponent)("el-card"),p=(0,i.resolveComponent)("el-switch"),u=(0,i.resolveComponent)("el-divider");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",m,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("adminLink")),1)])])),_:1}),(0,i.createVNode)(n,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",g,[(0,i.createVNode)(r,{modelValue:s.adminFolder,"onUpdate:modelValue":t[1]||(t[1]=e=>s.adminFolder=e),placeholder:e.$t("adminFolder"),disabled:e.devMode},{prepend:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(s.parent.constants.APP_BASE_URL+"/"),1)])),append:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{icon:"check",onClick:t[0]||(t[0]=e=>o.updateAdminFolder())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("update")),1)])),_:1})])),_:1},8,["modelValue","placeholder","disabled"])])])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",w,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("discourageSearchEngines")),1)])])),_:1}),(0,i.createVNode)(n,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",V,[(0,i.createVNode)(p,{modelValue:s.discourageIndexing,"onUpdate:modelValue":t[2]||(t[2]=e=>s.discourageIndexing=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,onChange:o.updateDiscourageIndexing},null,8,["modelValue","active-color","inactive-color","onChange"])])])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",C,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("googleMapsApiKey")),1)])])),_:1}),(0,i.createVNode)(n,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",N,[(0,i.createVNode)(r,{modelValue:s.googleMapsApiKey,"onUpdate:modelValue":t[3]||(t[3]=e=>s.googleMapsApiKey=e),placeholder:e.$t("googleMapsApiKey"),type:"password","show-password":"",onChange:o.updateGMapsApiKey},null,8,["modelValue","placeholder","onChange"])])])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(c,{gutter:10,class:"mb-2"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{gutter:10,style:{"padding-top":"20px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:12,class:"text-left",style:{display:"flex","align-items":"center","font-size":"16px"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(e.$t("gMailApiSettings")),1)])),_:1})])),_:1}),(0,i.createVNode)(u),(0,i.createVNode)(c,{gutter:10,align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",f,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("username")),1)])])),_:1}),(0,i.createVNode)(n,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",y,[(0,i.createVNode)(r,{modelValue:s.gmailApiSettings.username,"onUpdate:modelValue":t[4]||(t[4]=e=>s.gmailApiSettings.username=e),placeholder:e.$t("username"),onChange:o.updateGmailApiSettings},null,8,["modelValue","placeholder","onChange"])])])),_:1})])),_:1}),(0,i.createVNode)(c,{gutter:10,align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",x,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("clientId")),1)])])),_:1}),(0,i.createVNode)(n,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",b,[(0,i.createVNode)(r,{modelValue:s.gmailApiSettings.clientId,"onUpdate:modelValue":t[5]||(t[5]=e=>s.gmailApiSettings.clientId=e),placeholder:e.$t("clientId"),type:"password","show-password":"",onChange:o.updateGmailApiSettings},null,8,["modelValue","placeholder","onChange"])])])),_:1})])),_:1}),(0,i.createVNode)(c,{gutter:10,align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",v,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("clientSecret")),1)])])),_:1}),(0,i.createVNode)(n,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",_,[(0,i.createVNode)(r,{modelValue:s.gmailApiSettings.clientSecret,"onUpdate:modelValue":t[6]||(t[6]=e=>s.gmailApiSettings.clientSecret=e),placeholder:e.$t("clientSecret"),type:"password","show-password":"",onChange:o.updateGmailApiSettings},null,8,["modelValue","placeholder","onChange"])])])),_:1})])),_:1}),(0,i.createVNode)(c,{gutter:10,align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",S,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("refreshToken")),1)])])),_:1}),(0,i.createVNode)(n,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",$,[(0,i.createVNode)(r,{modelValue:s.gmailApiSettings.refreshToken,"onUpdate:modelValue":t[7]||(t[7]=e=>s.gmailApiSettings.refreshToken=e),placeholder:e.$t("refreshToken"),type:"password","show-password":"",onChange:o.updateGmailApiSettings},null,8,["modelValue","placeholder","onChange"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],64)}var E=a(115),D=a.n(E),I={name:"Advanced",mixins:[h.Z,c.Z],data(){return{adminFolder:"",googleMapsApiKey:"",gmailApiSettings:{},discourageIndexing:!1,parent:this.$parent.$parent.$parent}},watch:{adminFolder:"sanitizeFolderName"},created(){this.init()},methods:{async init(){this.adminFolder=this.parent.getSettingValue(this.parent.Settings.ADMIN_FOLDER.NAME),this.googleMapsApiKey=this.parent.getSettingValue(this.parent.Settings.GOOGLE_MAPS_API_KEY.NAME);try{this.gmailApiSettings=JSON.parse(this.parent.getSettingValue(this.parent.Settings.GMAIL_API_SETTINGS.NAME))}catch(e){this.gmailApiSettings={username:"",clientId:"",clientSecret:"",refreshToken:""}}this.discourageIndexing=this.parent.getSettingValue(this.parent.Settings.DISCOURAGE_INDEXING.NAME,this.parent.VarTypes.BOOLEAN)},sanitizeFolderName(){this.adminFolder=D().sanitize.addUnderscore(this.adminFolder.toLowerCase())},async updateGMapsApiKey(e){await this.parent.updateSetting({name:this.parent.Settings.GOOGLE_MAPS_API_KEY.NAME,value:e}),await this.parent.getAllSettings()},async updateGmailApiSettings(){await this.parent.updateSetting({name:this.parent.Settings.GMAIL_API_SETTINGS.NAME,value:JSON.stringify(this.gmailApiSettings)}),await this.parent.getAllSettings()},async updateDiscourageIndexing(e){await this.parent.updateSetting({name:this.parent.Settings.DISCOURAGE_INDEXING.NAME,value:e?1:0}),await this.parent.getAllSettings()},async updateAdminFolder(){const e=this.parent.getSettingValue(this.parent.Settings.ADMIN_FOLDER.NAME);if(e&&this.adminFolder==e)return;const t=await this.parent.updateFolder({newValue:this.adminFolder,currentValue:e});if(t.success)switch(t.data){case"SUCCESS":await this.parent.updateSetting({name:this.parent.Settings.ADMIN_FOLDER.NAME,value:this.adminFolder}),await this.parent.getAllSettings(),this.$alert(this.$t("adminFolderChangeMessage"),this.$t("confirmation"),{showClose:!1,confirmButtonText:"OK",callback:e=>{location.replace(this.parent.constants.APP_BASE_URL+"/"+this.adminFolder)}});break;case"NO-VALUE":this.$message.error(this.$t("adminFolderCantBeEmpty"));break;default:this.$message.error(this.$t("anErrorOccured")),this.adminFolder=e}}}},B=a(83744);const A=(0,B.Z)(I,[["render",k]]);var T=A;const M={class:"text-left"},U={class:"text-right"},O=(0,i.createElementVNode)("hr",null,null,-1);function L(e,t,a,l,s,o){const n=(0,i.resolveComponent)("el-alert"),d=(0,i.resolveComponent)("el-col"),r=(0,i.resolveComponent)("country-flag"),c=((0,i.resolveComponent)("el-option"),(0,i.resolveComponent)("el-select"),(0,i.resolveComponent)("el-row")),h=(0,i.resolveComponent)("el-card"),p=(0,i.resolveComponent)("el-radio-button"),u=(0,i.resolveComponent)("el-radio-group"),m=(0,i.resolveComponent)("InfoFilled"),g=(0,i.resolveComponent)("el-icon"),w=(0,i.resolveComponent)("el-tooltip"),V=(0,i.resolveComponent)("el-button"),C=(0,i.resolveComponent)("el-divider"),N=(0,i.resolveComponent)("el-input");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(n,{title:e.$t("appSettingsInfo"),closable:!1,effect:"dark",class:"mb-10",type:"info","show-icon":""},null,8,["title"]),(0,i.createCommentVNode)("",!0),(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",M,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("dateFormat")),1)])])),_:1}),(0,i.createVNode)(d,{span:20},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",U,[(0,i.createVNode)(u,{modelValue:s.dateFormat,"onUpdate:modelValue":t[1]||(t[1]=e=>s.dateFormat=e),size:"small",onChange:o.updateDateFormat},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.parent.constants.DATE_FORMAT_LIST,(t=>((0,i.openBlock)(),(0,i.createBlock)(p,{key:t,label:t},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(s.parent.formatDate(new Date,{outPattern:t,locale:e.$i18n.locale}))+" ",1),O,(0,i.createElementVNode)("small",null,(0,i.toDisplayString)(t),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","onChange"])])])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(c,{gutter:10,class:"mb-2"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{gutter:10,style:{"padding-top":"20px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12,class:"text-left",style:{display:"flex","align-items":"center","font-size":"16px"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("b",null,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("multilingualEntries"))+" ",1),(0,i.createVNode)(w,{content:e.$t("multilingualEntriesInfo"),effect:"light",placement:"right",class:"mr-2"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(g,{style:(0,i.normalizeStyle)(`font-size: 12px; color: ${e.appPrimaryColor}`)},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m)])),_:1},8,["style"])])),_:1},8,["content"])])])),_:1}),(0,i.createVNode)(d,{span:12,class:"text-right"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(V,{type:"primary",size:"default",icon:"plus",onClick:t[2]||(t[2]=e=>o.addEntry())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("add")),1)])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(C),(0,i.createVNode)(c,{gutter:10,style:{"padding-bottom":"20px"}},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.entries,((t,a)=>((0,i.openBlock)(),(0,i.createBlock)(d,{key:a,span:8,class:"mb-10"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{gutter:4},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(N,{modelValue:t.label,"onUpdate:modelValue":e=>t.label=e,placeholder:e.$t("label"),size:"small",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024),(0,i.createVNode)(d,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(N,{modelValue:t.code,"onUpdate:modelValue":e=>t.code=e,placeholder:e.$t("code"),size:"small",style:{width:"100%"},onInput:e=>o.fixLangCode(e,a)},{prefix:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{iso:t.code.replace("EN","GB"),class:"ml-5 mr-5"},null,8,["iso"])])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onInput"])])),_:2},1024),(0,i.createVNode)(d,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(V,{type:"danger",icon:"delete",size:"small",style:{width:"100%"},disabled:0===a,onClick:e=>o.removeEntry(a)},null,8,["disabled","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1})],64)}var F={name:"General",mixins:[h.Z,c.Z],data(){return{entries:[],dateFormat:"",adminLanguage:"",parent:this.$parent.$parent.$parent}},watch:{entries:{handler(e,t){this.updateLangList()},deep:!0}},created(){this.init()},methods:{async init(){this.adminLanguage=this.$cookie.isCookieAvailable(this.parent.constants.LANG_COOKIE)?this.$cookie.getCookie(this.parent.constants.LANG_COOKIE):"fr",this.dateFormat=this.parent.getSettingValue(this.parent.Settings.DATE_FORMAT.NAME);try{this.entries=JSON.parse(this.parent.getSettingValue(this.parent.Settings.LANG_LIST.NAME))}catch(e){this.entries=[{code:"FR",label:"Français"}]}},updateAdminLanguage(){this.$i18n.locale=this.adminLanguage,this.$cookie.setCookie(this.parent.constants.LANG_COOKIE,this.adminLanguage,{expire:1/0}),location.reload()},async updateDateFormat(){await this.parent.updateSetting({name:this.parent.Settings.DATE_FORMAT.NAME,value:this.dateFormat}),await this.parent.getAllSettings()},async updateLangList(){await this.parent.updateSetting({name:this.parent.Settings.LANG_LIST.NAME,value:JSON.stringify(this.entries.filter((e=>e.label&&e.code)))}),await this.parent.getAllSettings()},addEntry(){this.entries.push({label:"",code:""})},removeEntry(e){this.entries.splice(e,1)},fixLangCode(e,t){this.entries[t].code=e.toUpperCase().substring(0,2)}}};const P=(0,B.Z)(F,[["render",L]]);var R=P,z=a(39494);function W(e,t,a,l,s,o){const n=(0,i.resolveComponent)("el-radio-button"),d=(0,i.resolveComponent)("el-radio-group"),r=(0,i.resolveComponent)("el-col"),c=(0,i.resolveComponent)("el-button"),h=z.Z,p=(0,i.resolveComponent)("font-awesome-icon"),u=(0,i.resolveComponent)("el-row"),m=(0,i.resolveComponent)("el-card"),g=(0,i.resolveComponent)("JsonEditorVue"),w=(0,i.resolveComponent)("el-alert"),V=(0,i.resolveComponent)("el-tree"),C=(0,i.resolveComponent)("el-dialog"),N=(0,i.resolveDirective)("loading");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(m,{shadow:"never",class:"settings-item-card",style:{"margin-bottom":"5px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{gutter:10,style:{"padding-top":"10px","padding-bottom":"10px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{span:12,class:"text-left"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{modelValue:s.index,"onUpdate:modelValue":t[0]||(t[0]=e=>s.index=e),size:"default"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{label:0},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("sections")),1)])),_:1}),(0,i.createVNode)(n,{label:1},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("widgets")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,i.createVNode)(r,{span:12,class:"text-right"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{type:"primary",icon:"download",size:"default",title:e.$t("download"),onClick:t[1]||(t[1]=e=>o.downloadJsonData())},null,8,["title"]),(0,i.createVNode)(h,{"to-copy":s.index?JSON.stringify(e.widgetsJSONData,null,2):JSON.stringify(e.sectionsJSONData,null,2),class:"json-copy-btn",onCopy:o.copyJsonData},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{type:"primary",icon:"document-copy",size:"default",title:e.$t("copy")},null,8,["title"])])),_:1},8,["to-copy","onCopy"]),(0,i.createVNode)(c,{type:"primary",icon:"info-filled",size:"default",title:e.$t("info"),onClick:t[2]||(t[2]=e=>s.displayInfo=!0)},null,8,["title"]),(0,i.createVNode)(c,{type:"primary",size:"default",disabled:o.dataUnchanged,onClick:t[3]||(t[3]=e=>o.saveJSONData())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{icon:"save",class:"mr-5"}),(0,i.createTextVNode)(" "+(0,i.toDisplayString)(e.$t("save")),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}),(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(m,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{gutter:10,style:{"padding-top":"10px","padding-bottom":"10px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{span:24},{default:(0,i.withCtx)((()=>[s.index&&e.widgetsFileExists||!s.index&&e.sectionsFileExists?((0,i.openBlock)(),(0,i.createBlock)(g,(0,i.mergeProps)({key:0},{onChange:o.onJSONDataChange},{modelValue:s.jsonData,"onUpdate:modelValue":t[4]||(t[4]=e=>s.jsonData=e)}),null,16,["modelValue"])):((0,i.openBlock)(),(0,i.createBlock)(w,{key:1,type:"warning",closable:!1,title:`${s.index?e.$t("unableLoadWidgets"):e.$t("unableLoadSections")}. ${e.$t("ensureValidTemplateAssociated")}`},null,8,["title"]))])),_:1})])),_:1})])),_:1})),[[N,s.isLoading]]),(0,i.createVNode)(C,{modelValue:s.displayInfo,"onUpdate:modelValue":t[5]||(t[5]=e=>s.displayInfo=e),title:s.index?e.$t("widgetModel"):e.$t("sectionModel"),width:s.index?"65%":"35%","append-to-body":"",top:"2vh"},{default:(0,i.withCtx)((()=>[s.index?((0,i.openBlock)(),(0,i.createBlock)(u,{key:0,gutter:10,style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{span:12,class:"text-center"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(e.$t("widgetObject")),1),(0,i.createVNode)(V,{"node-key":"id",data:s.widgetObjectModel,props:s.defaultProps,"default-expanded-keys":[1],"highlight-current":""},null,8,["data","props"])])),_:1}),(0,i.createVNode)(r,{span:12,class:"text-center"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(e.$t("formItemObject")),1),(0,i.createVNode)(V,{"node-key":"id",data:s.widgetFormItemModel,props:s.defaultProps,"default-expanded-keys":[1],"highlight-current":""},null,8,["data","props"])])),_:1})])),_:1})):((0,i.openBlock)(),(0,i.createBlock)(u,{key:1,gutter:10,style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{span:24,class:"text-center"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(e.$t("sectionObject")),1),(0,i.createVNode)(V,{"node-key":"id",data:s.sectionObjectModel,props:s.defaultProps,"default-expanded-keys":[1],"highlight-current":""},null,8,["data","props"])])),_:1})])),_:1}))])),_:1},8,["modelValue","title","width"])],64)}var J=a(92829),H={name:"JsonEditor",data(){return{index:0,jsonData:{},isLoading:!1,displayInfo:!1,reactToIndexChange:!0,widgetFormItemModel:[{id:0,label:"[array]",children:[{id:1,label:"FORM_ITEM",children:[{id:2,label:"id",children:[{label:"type: [string]"},{label:`description: ${this.$t("id")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:3,label:"type",children:[{label:"type: [string]"},{label:`description: ${this.$t("type")}`},{label:`is_required: ${this.$t("yes")}`},{label:"values: text, text-multilingual, textarea, textarea-multilingual, number, image, image-gallery, html, html-multilingual, checkbox, video, file, color, date, list, slug, select, multiselect, linkedwidget, e-commerce-single-product, e-commerce-multiple-products, e-commerce-single-category, e-commerce-multiple-categories, news-single-article, news-multiple-articles, news-single-category, news-multiple-categories"}]},{id:4,label:"label_fr",children:[{label:"type: [string]"},{label:`description: ${this.$t("labelInFrench")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:5,label:"label_en",children:[{label:"type: [string]"},{label:`description: ${this.$t("labelInEnglish")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:6,label:"width",children:[{label:"type: [number]"},{label:`description: ${this.$t("itemWidth")}`},{label:`is_required: ${this.$t("no")}`},{label:"values: 1 - 24"}]},{id:7,label:"required",children:[{label:"type: [boolean]"},{label:`description: ${this.$t("itemIsRequired")}`},{label:`is_required: ${this.$t("yes")}`}]}]}]}],widgetObjectModel:[{id:0,label:"[object]",children:[{id:1,label:"WIDGET",children:[{id:2,label:"uid",children:[{label:"type: [string]"},{label:`description: ${this.$t("uniqueId")} | ${this.$t("mustBeUniqueAlphanumericString")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:3,label:"wid",children:[{label:"type: [string]"},{label:`description: ${this.$t("id")} | ${this.$t("mustBeInSnakeCase")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:4,label:"duplicable",children:[{label:"type: [boolean]"},{label:`description: ${this.$t("widgetIsDuplicable")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:5,label:"name_fr",children:[{label:"type: [string]"},{label:`description: ${this.$t("nameInFrench")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:6,label:"name_en",children:[{label:"type: [string]"},{label:`description: ${this.$t("nameInEnglish")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:7,label:"fullscreen",children:[{label:"type: [boolean]"},{label:`description: ${this.$t("fullscreen")}`},{label:`is_required: ${this.$t("no")}`}]},{id:8,label:"data",children:[{label:"type: [ array[object], array[array] ]"},{label:`description: ${this.$t("formData")}`},{label:`is_required: ${this.$t("yes")}`}]}]}]}],sectionObjectModel:[{id:0,label:"[object]",children:[{id:1,label:"SECTION",children:[{id:2,label:"uid",children:[{label:"type: [string]"},{label:`description: ${this.$t("uniqueId")} | ${this.$t("mustBeUniqueAlphanumericString")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:3,label:"sid",children:[{label:"type: [string]"},{label:`description: ${this.$t("id")} | ${this.$t("mustBeInSnakeCase")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:4,label:"name_fr",children:[{label:"type: [string]"},{label:`description: ${this.$t("nameInFrench")}`},{label:`is_required: ${this.$t("yes")}`}]},{id:5,label:"name_en",children:[{label:"type: [string]"},{label:`description: ${this.$t("nameInEnglish")}`},{label:`is_required: ${this.$t("yes")}`}]}]}]}],defaultProps:{children:"children",label:"label"},parent:this.$parent.$parent.$parent}},computed:{...(0,p.mapWritableState)(r.d,["codeEditorIndex"]),dataUnchanged(){return this.index?this.$_.isEqual(this.jsonData,this.widgetsJSONData):this.$_.isEqual(this.jsonData,this.sectionsJSONData)}},watch:{index:{handler(e,t){this.reactToIndexChange&&this.switchJSONData(t),this.reactToIndexChange=!0,this.codeEditorIndex=e}}},async created(){this.index=this.codeEditorIndex,this.isLoading=!0,await this.loadJSONData(),this.isLoading=!1,this.jsonData=this.index?this.widgetsJSONData:this.sectionsJSONData},methods:{switchJSONData(e){e?this.$_.isEqual(this.jsonData,this.widgetsJSONData)?this.jsonData=this.sectionsJSONData:this.confirmSwitching(this.sectionsJSONData,e):this.$_.isEqual(this.jsonData,this.sectionsJSONData)?this.jsonData=this.widgetsJSONData:this.confirmSwitching(this.widgetsJSONData,e)},confirmSwitching(e,t){this.$confirm(this.$t("discardChanges"),this.$t("confirm"),{confirmButtonText:this.$t("yes"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((async()=>{this.jsonData=e})).catch((()=>{this.reactToIndexChange=!1,this.index=t}))},onJSONDataChange(e,t,a){},async saveJSONData(){const e=await this.parent.updateJSON({data:this.formatDataKeys(this.jsonData),file:this.index?"widgets":"sections"});e.success&&e.data?(await this.loadJSONData(),this.jsonData=this.index?this.widgetsJSONData:this.sectionsJSONData,this.$message.success(this.$t("success"))):this.$message.error(this.$t("anErrorOccured"))},formatDataKeys(e){const t={};return this.$_.forIn(e,((e,a)=>{const i=this.$_.cloneDeep(e);this.index?(i.wid=this.$_.snakeCase(a),t[i.wid]=i):(i.sid=this.$_.snakeCase(a),t[i.sid]=i)})),t},copyJsonData(e,t){t&&this.$message.success(this.$t("success"))},downloadJsonData(){(0,J.Hy)(this.index?this.widgetsJSONData:this.sectionsJSONData,this.index?"widgets":"sections")}}};const G=(0,B.Z)(H,[["render",W],["__scopeId","data-v-67ac17c4"]]);var j=G;const q={class:"text-left"},Z={class:"text-right"},K={class:"text-left"},Y={class:"text-right"},X={class:"text-left"},Q={class:"text-right"},ee={class:"text-left"},te={class:"text-right"},ae={class:"mr-10",style:{"padding-bottom":"2px"}},ie=(0,i.createElementVNode)("small",null,"GD",-1),le=(0,i.createElementVNode)("small",null,"IMAGICK",-1);function se(e,t,a,l,s,o){const n=(0,i.resolveComponent)("el-alert"),d=(0,i.resolveComponent)("el-col"),r=(0,i.resolveComponent)("el-switch"),c=(0,i.resolveComponent)("el-row"),h=(0,i.resolveComponent)("el-card"),p=(0,i.resolveComponent)("el-input-number"),u=(0,i.resolveComponent)("el-button"),m=(0,i.resolveComponent)("el-divider"),g=(0,i.resolveComponent)("el-input"),w=(0,i.resolveComponent)("el-option"),V=(0,i.resolveComponent)("el-select"),C=(0,i.resolveComponent)("Check"),N=(0,i.resolveComponent)("Close"),f=(0,i.resolveComponent)("el-icon"),y=(0,i.resolveComponent)("el-progress");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(n,{title:e.$t("appSettingsInfo"),closable:!1,effect:"dark",class:"mb-10",type:"info","show-icon":""},null,8,["title"]),(0,i.createVNode)(c,{gutter:10,class:"mb-10"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",q,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("compressImages")),1)])])),_:1}),(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Z,[(0,i.createVNode)(r,{modelValue:s.compressImages,"onUpdate:modelValue":t[0]||(t[0]=e=>s.compressImages=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,onChange:o.updateCompressImages},null,8,["modelValue","active-color","inactive-color","onChange"])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:14},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",K,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("compressionThreshold"))+" (mb)",1)])])),_:1}),(0,i.createVNode)(d,{span:10},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Y,[(0,i.createVNode)(p,{modelValue:s.compressThreshold,"onUpdate:modelValue":t[1]||(t[1]=e=>s.compressThreshold=e),size:"small","controls-position":"right",disabled:!s.compressImages,step:.1,min:.8,max:10,label:"label",onChange:o.updateCompressThreshold},null,8,["modelValue","disabled","step","min","onChange"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(c,{gutter:10,class:"mb-10"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:20},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",X,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("keepDeletedFiles")),1)])])),_:1}),(0,i.createVNode)(d,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Q,[(0,i.createVNode)(r,{modelValue:s.keepDeletedFiles,"onUpdate:modelValue":t[2]||(t[2]=e=>s.keepDeletedFiles=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,onChange:o.updateKeepDeletedFiles},null,8,["modelValue","active-color","inactive-color","onChange"])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:20},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",ee,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("displayTrash")),1)])])),_:1}),(0,i.createVNode)(d,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",te,[(0,i.createVNode)(r,{modelValue:s.displayTrash,"onUpdate:modelValue":t[3]||(t[3]=e=>s.displayTrash=e),width:60,style:{display:"block"},disabled:s.disableDisplayTrash,"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,onChange:o.updateDisplayTrash},null,8,["modelValue","disabled","active-color","inactive-color","onChange"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(c,{gutter:10,class:"mb-2"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{gutter:10,style:{"padding-top":"20px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12,class:"text-left",style:{display:"flex","align-items":"center","font-size":"16px"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(e.$t("thumbnailTypes")),1)])),_:1}),(0,i.createVNode)(d,{span:12,class:"text-right"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{type:"primary",size:"default",icon:"plus",onClick:t[4]||(t[4]=e=>o.addThumbnail())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("add")),1)])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(m),(0,i.createVNode)(c,{gutter:10,style:{"padding-bottom":"20px"}},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.thumbnails,((t,a)=>((0,i.openBlock)(),(0,i.createBlock)(d,{key:a,span:12,class:"mb-10"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{gutter:4},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(g,{modelValue:t.label,"onUpdate:modelValue":e=>t.label=e,placeholder:e.$t("name"),readonly:!t.editable,size:"small",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","placeholder","readonly"])])),_:2},1024),(0,i.createVNode)(d,{span:6},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{modelValue:t.width,"onUpdate:modelValue":e=>t.width=e,min:1,size:"small",style:{width:"100%"},"controls-position":"right",placeholder:e.$t("width"),disabled:!t.editable},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])])),_:2},1024),(0,i.createVNode)(d,{span:6},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{modelValue:t.height,"onUpdate:modelValue":e=>t.height=e,min:1,size:"small",style:{width:"100%"},"controls-position":"right",placeholder:e.$t("height"),disabled:!t.editable},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])])),_:2},1024),(0,i.createVNode)(d,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{type:"primary",icon:"close",size:"small",style:{width:"100%"},disabled:!t.editable,onClick:e=>o.removeThumbnail(a)},null,8,["disabled","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(c,{gutter:10,class:"mb-2"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{gutter:10,style:{"padding-top":"10px","padding-bottom":"10px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12,class:"text-left",style:{display:"flex","align-items":"center","font-size":"16px"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(e.$t("thumbnailsFormat")),1)])),_:1}),(0,i.createVNode)(d,{span:12,class:"text-right"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(V,{modelValue:s.thumbnailsFormat,"onUpdate:modelValue":t[5]||(t[5]=e=>s.thumbnailsFormat=e),style:{width:"100%"},placeholder:e.$t("select"),"no-data-text":e.$t("noData"),"no-match-text":e.$t("noMatchingData"),onChange:o.updateThumbnailsFormat},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.parent.thumbnailFormats,(e=>((0,i.openBlock)(),(0,i.createBlock)(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","no-data-text","no-match-text","onChange"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(c,{gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{gutter:10,style:{"padding-top":"20px"},align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12,style:{display:"flex","align-items":"center"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("b",ae,(0,i.toDisplayString)(e.$t("imageProcessingLibraries")),1),ie,(0,i.createTextVNode)("    "),(0,i.createVNode)(f,{class:"mr-10",style:(0,i.normalizeStyle)([{"font-size":"14px","font-weight":"bold"},s.GD?"color:#259EC0":"color:red"])},{default:(0,i.withCtx)((()=>[s.GD?((0,i.openBlock)(),(0,i.createBlock)(C,{key:0})):((0,i.openBlock)(),(0,i.createBlock)(N,{key:1}))])),_:1},8,["style"]),le,(0,i.createTextVNode)("    "),(0,i.createVNode)(f,{style:(0,i.normalizeStyle)([{"font-size":"14px","font-weight":"bold"},s.IMAGICK?"color:#259EC0":"color:red"])},{default:(0,i.withCtx)((()=>[s.IMAGICK?((0,i.openBlock)(),(0,i.createBlock)(C,{key:0})):((0,i.openBlock)(),(0,i.createBlock)(N,{key:1}))])),_:1},8,["style"])])),_:1}),(0,i.createVNode)(d,{span:12,class:"text-right"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(V,{modelValue:s.imgProcessingLib,"onUpdate:modelValue":t[6]||(t[6]=e=>s.imgProcessingLib=e),size:"small",style:{width:"100%"},placeholder:e.$t("imageProcessingLibraries"),onChange:o.updateImgProcessingLib},{default:(0,i.withCtx)((()=>[s.GD?((0,i.openBlock)(),(0,i.createBlock)(w,{key:0,label:"GD",value:"gd"})):(0,i.createCommentVNode)("",!0),s.IMAGICK?((0,i.openBlock)(),(0,i.createBlock)(w,{key:1,label:"IMAGICK",value:"imagick"})):(0,i.createCommentVNode)("",!0)])),_:1},8,["modelValue","placeholder","onChange"])])),_:1}),(0,i.createVNode)(d,{span:14},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{type:"primary",size:"small",style:{width:"100%"},icon:"grid",disabled:s.isGenerating,onClick:t[7]||(t[7]=e=>o.genThumbnailFiles())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(s.isGenerating?e.$t("inProgress"):s.thumbnailFiles.length?e.$t("regenerateThumbnails"):e.$t("generateThumbnails")),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(m),(0,i.createVNode)(c,{gutter:10,style:{"padding-bottom":"20px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:6,style:{display:"flex","align-items":"center"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("small",null,(0,i.toDisplayString)(e.$t("xGeneratedThumbnails",[s.thumbnailFiles.length])),1)])),_:1}),(0,i.createVNode)(d,{span:18,style:{display:"flex","align-items":"center","padding-top":"3px"}},{default:(0,i.withCtx)((()=>[s.isGenerating?((0,i.openBlock)(),(0,i.createBlock)(y,{key:0,duration:2,percentage:100,"show-text":!1,indeterminate:!0,style:{width:"100%"}})):(0,i.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],64)}var oe={name:"Medias",mixins:[h.Z,c.Z],data(){return{GD:!1,IMAGICK:!1,thumbnails:[],thumbnailFiles:[],customThumbnails:[],thumbnailsFormat:0,compressThreshold:0,compressImages:!1,isGenerating:!1,imgProcessingLib:"",displayTrash:!1,keepDeletedFiles:!1,disableDisplayTrash:!1,thumbnailsFolder:"thumbnails",mediasFolder:"medias",parent:this.$parent.$parent.$parent}},watch:{thumbnails:{handler(e,t){this.updateCustomThumbnails()},deep:!0}},created(){this.init()},methods:{...(0,u.mapActions)("media",["checkLib","getFolderMedias","generateThumbnail","generateThumbnails"]),async init(){this.displayTrash=!!this.parent.getSettingValue(this.parent.Settings.DISPLAY_TRASH.NAME,this.parent.VarTypes.NUMBER),this.compressImages=!!this.parent.getSettingValue(this.parent.Settings.COMPRESS_IMAGES.NAME,this.parent.VarTypes.NUMBER),this.compressThreshold=this.parent.getSettingValue(this.parent.Settings.COMPRESS_THRESHOLD.NAME,this.parent.VarTypes.NUMBER),this.keepDeletedFiles=!!this.parent.getSettingValue(this.parent.Settings.KEEP_DELETED_FILES.NAME,this.parent.VarTypes.NUMBER),this.thumbnailsFormat=this.parent.getSettingValue(this.parent.Settings.THUMBNAILS_FORMAT.NAME,this.parent.VarTypes.NUMBER),this.customThumbnails=this.parent.getSettingValue(this.parent.Settings.CUSTOM_THUMBNAILS.NAME,this.parent.VarTypes.ARRAY),this.imgProcessingLib=this.parent.getSettingValue(this.parent.Settings.IMAGE_PROCESSING_LIBRARY.NAME),this.thumbnails=this.parent.defaultThumbnails,this.customThumbnails.forEach((e=>{this.thumbnails.push(e)})),this.disableDisplayTrash=!this.keepDeletedFiles,this.checkProcessingLibs(),this.loadThumbnailFiles()},async checkProcessingLibs(){this.GD=(await this.checkLib({lib:"gd"})).data,this.IMAGICK=(await this.checkLib({lib:"imagick"})).data},async loadThumbnailFiles(){const e=await this.getFolderMedias({folder:this.thumbnailsFolder});e.success&&e.data&&(this.thumbnailFiles=e.data)},async updateCompressImages(e){await this.parent.updateSetting({name:this.parent.Settings.COMPRESS_IMAGES.NAME,value:e?1:0}),await this.parent.getAllSettings()},async updateCompressThreshold(e){await this.parent.updateSetting({name:this.parent.Settings.COMPRESS_THRESHOLD.NAME,value:e}),await this.parent.getAllSettings()},async updateKeepDeletedFiles(e){await this.parent.updateSetting({name:this.parent.Settings.KEEP_DELETED_FILES.NAME,value:e?1:0}),await this.parent.getAllSettings(),this.disableDisplayTrash=!1,e||(this.displayTrash=!1,await this.updateDisplayTrash(!1)),this.disableDisplayTrash=!this.keepDeletedFiles},async updateDisplayTrash(e){await this.parent.updateSetting({name:this.parent.Settings.DISPLAY_TRASH.NAME,value:e?1:0}),await this.parent.getAllSettings()},async updateThumbnailsFormat(e){await this.parent.updateSetting({name:this.parent.Settings.THUMBNAILS_FORMAT.NAME,value:e}),await this.parent.getAllSettings()},async updateImgProcessingLib(e){await this.parent.updateSetting({name:this.parent.Settings.IMAGE_PROCESSING_LIBRARY.NAME,value:e}),await this.parent.getAllSettings()},async updateCustomThumbnails(){if(this.thumbnails.length>=4){const e=[];this.thumbnails.forEach(((t,a)=>{a>3&&t.label&&t.width&&t.height&&e.push(t)})),await this.parent.updateSetting({name:this.parent.Settings.CUSTOM_THUMBNAILS.NAME,value:e.length>0?JSON.stringify(e):""}),await this.parent.getAllSettings()}},addThumbnail(){this.thumbnails.push({label:"",width:1,height:1,editable:!0})},removeThumbnail(e){this.thumbnails.splice(e,1)},async genThumbnailFiles(){if(!this.imgProcessingLib)return void this.$message.error(this.$t("noLibSelected"));this.isGenerating=!0;const e=setInterval((()=>{this.loadThumbnailFiles()}),500),t=await this.generateThumbnails({reset:!0,autoWidth:this.thumbnailsFormat==this.parent.ThumbnailFormats.AUTOWIDTH.value,autoHeight:this.thumbnailsFormat==this.parent.ThumbnailFormats.AUTOHEIGHT.value,folder:this.mediasFolder,lib:this.imgProcessingLib,models:this.thumbnails.filter((e=>e.label&&e.width&&e.height))});t.success&&t.data?this.$message.success(this.$t("success")):this.$message.error(this.$t("anErrorOccured")),clearInterval(e),this.loadThumbnailFiles(),this.isGenerating=!1}}};const ne=(0,B.Z)(oe,[["render",se]]);var de=ne;const re={class:"text-left"},ce={class:"text-right"},he={class:"text-left"},pe={class:"text-right"},ue={class:"text-left"},me=(0,i.createElementVNode)("br",null,null,-1),ge={style:{"font-weight":"normal"}},we={class:"text-right"},Ve={class:"text-left"},Ce={class:"text-right"},Ne={class:"text-left"},fe={class:"text-right"},ye={class:"text-left"},xe={class:"text-right"},be={class:"text-left"},ve={class:"text-right"},_e={class:"text-left"},Se={class:"text-right"};function $e(e,t,a,l,s,o){const n=(0,i.resolveComponent)("el-alert"),d=(0,i.resolveComponent)("el-col"),r=(0,i.resolveComponent)("el-switch"),c=(0,i.resolveComponent)("el-row"),h=(0,i.resolveComponent)("el-card"),p=(0,i.resolveComponent)("el-input"),u=(0,i.resolveComponent)("el-option"),m=(0,i.resolveComponent)("el-select");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(n,{title:e.$t("appSettingsInfo"),closable:!1,effect:"dark",class:"mb-10",type:"info","show-icon":""},null,8,["title"]),(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",re,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("newsModule")),1)])])),_:1}),(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",ce,[(0,i.createVNode)(r,{modelValue:s.newsModule,"onUpdate:modelValue":t[0]||(t[0]=e=>s.newsModule=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,"inactive-text":e.$t("remove"),"active-text":e.$t("add"),onChange:t[1]||(t[1]=e=>o.updateModuleStatus(e,s.parent.Settings.NEWS_MODULE.NAME))},null,8,["modelValue","active-color","inactive-color","inactive-text","active-text"])])])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",he,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("newsletterModule")),1)])])),_:1}),(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",pe,[(0,i.createVNode)(r,{modelValue:s.newsletterModule,"onUpdate:modelValue":t[2]||(t[2]=e=>s.newsletterModule=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,"inactive-text":e.$t("remove"),"active-text":e.$t("add"),onChange:t[3]||(t[3]=e=>o.updateModuleStatus(e,s.parent.Settings.NEWSLETTER_MODULE.NAME))},null,8,["modelValue","active-color","inactive-color","inactive-text","active-text"])])])),_:1})])),_:1}),(0,i.createVNode)(i.Transition,{name:"el-zoom-in-top"},{default:(0,i.withCtx)((()=>[(0,i.withDirectives)((0,i.createVNode)(c,{align:"middle",gutter:10,class:"mb-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"hover",class:"mb-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle",class:"mb-10"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",ue,[(0,i.createElementVNode)("h4",null,[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("newslettersSendingEmail"))+" ",1),me,(0,i.createElementVNode)("small",ge,(0,i.toDisplayString)(e.$t("newslettersSendingEmailTip")),1)])])])),_:1}),(0,i.createVNode)(d,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",we,[(0,i.createVNode)(p,{modelValue:s.newsletterEmail,"onUpdate:modelValue":t[4]||(t[4]=e=>s.newsletterEmail=e),placeholder:e.$t("email"),onChange:o.updateNewsletterEmail},null,8,["modelValue","placeholder","onChange"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[i.vShow,s.newsletterModule]])])),_:1})])),_:1}),(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Ve,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("subscriptionModule")),1)])])),_:1}),(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Ce,[(0,i.createVNode)(r,{modelValue:s.subscriptionModule,"onUpdate:modelValue":t[5]||(t[5]=e=>s.subscriptionModule=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,"inactive-text":e.$t("remove"),"active-text":e.$t("add"),onChange:t[6]||(t[6]=e=>o.updateModuleStatus(e,s.parent.Settings.SUBSCRIPTION_MODULE.NAME))},null,8,["modelValue","active-color","inactive-color","inactive-text","active-text"])])])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Ne,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("adModule")),1)])])),_:1}),(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",fe,[(0,i.createVNode)(r,{modelValue:s.adModule,"onUpdate:modelValue":t[7]||(t[7]=e=>s.adModule=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,"inactive-text":e.$t("remove"),"active-text":e.$t("add"),onChange:t[8]||(t[8]=e=>o.updateModuleStatus(e,s.parent.Settings.AD_MODULE.NAME))},null,8,["modelValue","active-color","inactive-color","inactive-text","active-text"])])])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",ye,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("eCommerceModule")),1)])])),_:1}),(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",xe,[(0,i.createVNode)(r,{modelValue:s.eCommerceModule,"onUpdate:modelValue":t[9]||(t[9]=e=>s.eCommerceModule=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,"inactive-text":e.$t("remove"),"active-text":e.$t("add"),onChange:t[10]||(t[10]=e=>o.updateModuleStatus(e,s.parent.Settings.E_COMMERCE_MODULE.NAME))},null,8,["modelValue","active-color","inactive-color","inactive-text","active-text"])])])),_:1})])),_:1}),(0,i.createVNode)(i.Transition,{name:"el-zoom-in-top"},{default:(0,i.withCtx)((()=>[(0,i.withDirectives)((0,i.createElementVNode)("section",null,[(0,i.createVNode)(c,{align:"middle",gutter:10,class:"mb-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"hover",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:18},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",be,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("managePromotions")),1)])])),_:1}),(0,i.createVNode)(d,{span:6},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",ve,[(0,i.createVNode)(r,{modelValue:s.displayPromotions,"onUpdate:modelValue":t[11]||(t[11]=e=>s.displayPromotions=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,onChange:t[12]||(t[12]=e=>o.updateModuleStatus(e,s.parent.Settings.DISPLAY_PROMOTIONS.NAME))},null,8,["modelValue","active-color","inactive-color"])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(d,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{shadow:"hover",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",_e,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("currency")),1)])])),_:1}),(0,i.createVNode)(d,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Se,[(0,i.createVNode)(m,{modelValue:s.currency,"onUpdate:modelValue":t[13]||(t[13]=e=>s.currency=e),size:"default",placeholder:e.$t("select"),"no-data-text":e.$t("noData"),"no-match-text":e.$t("noMatchingData"),onChange:o.updateCurrency},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.parent.currencies,(e=>((0,i.openBlock)(),(0,i.createBlock)(u,{key:e.id,label:e.label,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder","no-data-text","no-match-text","onChange"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],512),[[i.vShow,s.eCommerceModule]])])),_:1})])),_:1})],64)}var ke={name:"Modules",mixins:[h.Z,c.Z],data(){return{newsletterEmail:"",subscriptionModule:!1,displayPromotions:!1,newsletterModule:!1,eCommerceModule:!1,newsModule:!1,adModule:!1,currency:0,parent:this.$parent.$parent.$parent}},created(){this.init()},methods:{async init(){this.newsletterEmail=this.parent.getSettingValue(this.parent.Settings.NEWSLETTER_EMAIL.NAME),this.currency=this.parent.getSettingValue(this.parent.Settings.WEBSITE_CURRENCY.NAME,this.parent.VarTypes.NUMBER),this.displayPromotions=!!this.parent.getSettingValue(this.parent.Settings.DISPLAY_PROMOTIONS.NAME,this.parent.VarTypes.NUMBER),this.adModule=!!this.parent.getSettingValue(this.parent.Settings.AD_MODULE.NAME,this.parent.VarTypes.NUMBER),this.newsModule=!!this.parent.getSettingValue(this.parent.Settings.NEWS_MODULE.NAME,this.parent.VarTypes.NUMBER),this.eCommerceModule=!!this.parent.getSettingValue(this.parent.Settings.E_COMMERCE_MODULE.NAME,this.parent.VarTypes.NUMBER),this.newsletterModule=!!this.parent.getSettingValue(this.parent.Settings.NEWSLETTER_MODULE.NAME,this.parent.VarTypes.NUMBER),this.subscriptionModule=!!this.parent.getSettingValue(this.parent.Settings.SUBSCRIPTION_MODULE.NAME,this.parent.VarTypes.NUMBER)},async updateNewsletterEmail(e){await this.parent.updateSetting({name:this.parent.Settings.NEWSLETTER_EMAIL.NAME,value:e}),await this.parent.getAllSettings()},async updateCurrency(e){await this.parent.updateSetting({name:this.parent.Settings.WEBSITE_CURRENCY.NAME,value:e}),await this.parent.getAllSettings()},async updateModuleStatus(e,t){await this.parent.updateSetting({name:t,value:e?1:0}),await this.parent.getAllSettings()}}};const Ee=(0,B.Z)(ke,[["render",$e]]);var De=Ee;const Ie={class:"text-left"},Be={class:"text-right"},Ae={class:"text-left"},Te={class:"text-right"};function Me(e,t,a,l,s,o){const n=(0,i.resolveComponent)("el-alert"),d=(0,i.resolveComponent)("el-col"),r=(0,i.resolveComponent)("el-switch"),c=(0,i.resolveComponent)("el-row"),h=(0,i.resolveComponent)("el-card");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(n,{title:e.$t("appSettingsInfo"),closable:!1,effect:"dark",class:"mb-10",type:"info","show-icon":""},null,8,["title"]),(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Ie,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("enableAdminNotifications")),1)])])),_:1}),(0,i.createVNode)(d,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Be,[(0,i.createVNode)(r,{modelValue:s.enableAdminNotifications,"onUpdate:modelValue":t[0]||(t[0]=e=>s.enableAdminNotifications=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,onChange:o.updateAdminNotifications},null,8,["modelValue","active-color","inactive-color","onChange"])])])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(h,{shadow:"never",class:"mb-5 settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Ae,[(0,i.createElementVNode)("h4",null,(0,i.toDisplayString)(e.$t("enableEmailNotifications")),1)])])),_:1}),(0,i.createVNode)(d,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Te,[(0,i.createVNode)(r,{modelValue:s.enableEmailNotifications,"onUpdate:modelValue":t[1]||(t[1]=e=>s.enableEmailNotifications=e),width:60,style:{display:"block"},"active-color":e.appPrimaryColor,"inactive-color":e.appAccentColor,onChange:o.updateEmailNotifications},null,8,["modelValue","active-color","inactive-color","onChange"])])])),_:1})])),_:1})])),_:1})],64)}var Ue={name:"Notifications",mixins:[h.Z,c.Z],data(){return{enableEmailNotifications:!1,enableAdminNotifications:!1,parent:this.$parent.$parent.$parent}},created(){this.init()},methods:{async init(){this.enableEmailNotifications=!!this.parent.getSettingValue(this.parent.Settings.ENABLE_EMAIL_NOTIFICATIONS.NAME,this.parent.VarTypes.NUMBER),this.enableAdminNotifications=!!this.parent.getSettingValue(this.parent.Settings.ENABLE_ADMIN_NOTIFICATIONS.NAME,this.parent.VarTypes.NUMBER)},async updateEmailNotifications(e){await this.parent.updateSetting({name:this.parent.Settings.ENABLE_EMAIL_NOTIFICATIONS.NAME,value:e?1:0}),await this.parent.getAllSettings()},async updateAdminNotifications(e){await this.parent.updateSetting({name:this.parent.Settings.ENABLE_ADMIN_NOTIFICATIONS.NAME,value:e?1:0}),await this.parent.getAllSettings()}}};const Oe=(0,B.Z)(Ue,[["render",Me]]);var Le=Oe;const Fe=e=>((0,i.pushScopeId)("data-v-7ba7bebe"),e=e(),(0,i.popScopeId)(),e),Pe={key:0,style:{"padding-top":"20px"}},Re=["innerHTML"],ze={key:2,class:"mt-10"},We=Fe((()=>(0,i.createElementVNode)("br",null,null,-1))),Je=["innerHTML"],He={class:"image-slot"},Ge=["innerHTML"],je={class:"el-upload__text mt-10"};function qe(e,t,a,l,s,o){const n=(0,i.resolveComponent)("el-button"),d=(0,i.resolveComponent)("el-link"),r=(0,i.resolveComponent)("Picture"),c=(0,i.resolveComponent)("el-icon"),h=(0,i.resolveComponent)("el-image"),p=(0,i.resolveComponent)("el-carousel-item"),u=(0,i.resolveComponent)("el-carousel"),m=(0,i.resolveComponent)("el-descriptions-item"),g=(0,i.resolveComponent)("el-tag"),w=(0,i.resolveComponent)("el-descriptions"),V=(0,i.resolveComponent)("el-alert"),C=(0,i.resolveComponent)("el-card"),N=(0,i.resolveComponent)("UploadFilled"),f=(0,i.resolveComponent)("el-upload"),y=(0,i.resolveDirective)("loading");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(C,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[e.templateFileExists?((0,i.openBlock)(),(0,i.createElementBlock)("div",Pe,[(0,i.createVNode)(w,{title:e.$t("templateInfo"),column:1,border:""},{extra:(0,i.withCtx)((()=>[e.devMode&&s.parent.getUserActionScope("DELETE_TEMPLATE_ACTION")?((0,i.openBlock)(),(0,i.createBlock)(n,{key:0,size:"default",type:"danger",icon:"delete",onClick:t[0]||(t[0]=e=>o.deleteCurrentTemplate())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("deleteTemplate")),1)])),_:1})):(0,i.createCommentVNode)("",!0)])),default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{align:"center","class-name":"descriptions-item-content"},{label:(0,i.withCtx)((()=>[e.templateJSONData["url"]?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,target:"_blank",href:e.templateJSONData["url"],type:e.pickByTheme("primary","success")},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.templateJSONData["name"]||""),1)])),_:1},8,["href","type"])):((0,i.openBlock)(),(0,i.createElementBlock)("span",{key:1,innerHTML:e.templateJSONData["name"]||""},null,8,Re)),e.templateJSONData["author"]?((0,i.openBlock)(),(0,i.createElementBlock)("div",ze,[(0,i.createElementVNode)("small",null,(0,i.toDisplayString)(e.$t("by")),1),We,(0,i.createElementVNode)("span",{innerHTML:e.templateJSONData["author"]},null,8,Je)])):(0,i.createCommentVNode)("",!0)])),default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,null,{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(e.templatePreviews,((e,t)=>((0,i.openBlock)(),(0,i.createBlock)(p,{key:t},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{fit:"cover","append-to-body":"",class:"template-preview",src:`${s.APP_BASE_URL}/template/${e}`,"preview-src-list":[`${s.APP_BASE_URL}/template/${e}`]},{error:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",He,[(0,i.createVNode)(c,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r)])),_:1})])])),_:2},1032,["src","preview-src-list"])])),_:2},1024)))),128))])),_:1})])),_:1}),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(o.templateInfo,((t,a)=>((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:a},[!["name","url","author"].includes(t.key)&&t.value?((0,i.openBlock)(),(0,i.createBlock)(m,{key:0,label:e.$_.startCase(t.key)},{default:(0,i.withCtx)((()=>["tags"==t.key?((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,{key:0},(0,i.renderList)(o.templateTags,((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:t},[e.trim()?((0,i.openBlock)(),(0,i.createBlock)(g,{key:0,class:"mr-10 mb-5"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.trim()),1)])),_:2},1024)):(0,i.createCommentVNode)("",!0)],64)))),128)):((0,i.openBlock)(),(0,i.createElementBlock)("span",{key:1,innerHTML:t?.value||""},null,8,Ge))])),_:2},1032,["label"])):(0,i.createCommentVNode)("",!0)],64)))),128))])),_:1},8,["title"])])):((0,i.openBlock)(),(0,i.createBlock)(V,{key:1,type:"warning",closable:!1,title:e.$t("noInfoAvailable")},null,8,["title"]))])),_:1})),[[y,s.isLoading]]),e.devMode&&s.parent.getUserActionScope("DELETE_TEMPLATE_ACTION")?((0,i.openBlock)(),(0,i.createBlock)(C,{key:0,shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(f,{ref:"upload",drag:"",action:"#",class:"upload-box","auto-upload":!1,"show-file-list":!1,"on-change":o.handleChange,"on-remove":o.handleChange,accept:".zip"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{class:"upload-icon",size:48},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(N)])),_:1}),(0,i.createElementVNode)("div",je,(0,i.toDisplayString)(e.$t("uploadTemplate")),1)])),_:1},8,["on-change","on-remove"])])),_:1})):(0,i.createCommentVNode)("",!0)],64)}var Ze=a(14445);const Ke={name:"TemplateInfo",data(){return{parent:this.$parent.$parent.$parent,isLoading:!1,adminFolder:"",APP_BASE_URL:o.APP_BASE_URL}},computed:{templateInfo(){const e=[];return this.$_.forIn(this.templateJSONData,(function(t,a){e.push({value:t,key:a})})),e},templateTags(){if(this.templateJSONData["tags"]){const e=this.templateJSONData["tags"].split(",");return e.filter((e=>e))}return[]},linkColor(){return this.pickByTheme("var(--el-color-primary)","var(--el-color-success)")}},async created(){this.isLoading=!0,await this.loadJSONData(),this.isLoading=!1,this.adminFolder=this.parent.getSettingValue(this.parent.Settings.ADMIN_FOLDER.NAME)},methods:{...(0,u.mapActions)({deleteAllWidget:"widget/deleteAllWidget",getAllPages:"page/getAllPages"}),async handleChange(e,t){const a=new FormData;a.append("folder",this.adminFolder),a.append("file",e.raw),this.$confirm(this.$t("installTemplateConfirm"),this.$t("installation"),{confirmButtonText:this.$t("yes"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((async()=>{const e=this.$message({message:this.$t("pleaseWait"),duration:0}),t=await this.parent.installTemplate(a);e.close(),!0===t.data?(await this.resetWidgetsAndPages(),location.reload()):"FILE_INVALID"===t.data?this.$message.warning(this.$t("fileInvalid")):"TEMPLATE_INVALID"===t.data?this.$message.warning(this.$t("templateInvalid")):this.$message.error(this.$t("anErrorOccured"))})).catch((()=>{}))},async deleteCurrentTemplate(){this.$confirm(this.$t("deleteTemplateConfirm"),this.$t("delete"),{confirmButtonText:this.$t("yes"),cancelButtonText:this.$t("cancel"),type:"danger"}).then((async()=>{const e=await this.parent.deleteTemplate({folder:this.adminFolder});e.success&&e.data?(await this.resetWidgetsAndPages(),location.reload()):this.$message.error(this.$t("anErrorOccured"))})).catch((()=>{}))},async resetWidgetsAndPages(){await this.deleteAllWidget();const e=await this.getAllPages();if(e.success&&e.data)for(let t=0;t<e.data.length;t++)await this.updateItemInDB({context:Ze.x,id:e.data[t].id,data:{bottom_sections:"",top_sections:""}})}}},Ye=()=>{(0,i.useCssVars)((e=>({"14d2caa8":e.linkColor})))},Xe=Ke.setup;Ke.setup=Xe?(e,t)=>(Ye(),Xe(e,t)):Ye;var Qe=Ke;const et=(0,B.Z)(Qe,[["render",qe],["__scopeId","data-v-7ba7bebe"]]);var tt=et;const at={class:"el-radio-group",role:"radiogroup"},it={class:"el-radio-button__inner"},lt={class:"el-radio-button__inner"};function st(e,t,a,l,s,o){const n=(0,i.resolveComponent)("el-col"),d=(0,i.resolveComponent)("el-row"),r=(0,i.resolveComponent)("el-card"),c=(0,i.resolveComponent)("Widgets"),h=(0,i.resolveComponent)("Sections"),p=(0,i.resolveComponent)("el-alert"),u=(0,i.resolveDirective)("loading");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(r,{shadow:"never",class:"settings-item-card",style:{"margin-bottom":"5px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{gutter:10,style:{"padding-top":"10px","padding-bottom":"10px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:24,class:"text-left"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",at,[(0,i.createElementVNode)("label",{class:(0,i.normalizeClass)([{"is-active":!s.index},"el-radio-button el-radio-button--mini"]),role:"radio","aria-checked":"true","aria-disabled":"false",tabindex:"0",onClick:t[0]||(t[0]=e=>o.switchJSONData(0))},[(0,i.createElementVNode)("span",it,(0,i.toDisplayString)(e.$t("sections")),1)],2),(0,i.createElementVNode)("label",{class:(0,i.normalizeClass)([{"is-active":s.index},"el-radio-button el-radio-button--mini"]),role:"radio","aria-checked":"false","aria-disabled":"false",tabindex:"-1",onClick:t[1]||(t[1]=e=>o.switchJSONData(1))},[(0,i.createElementVNode)("span",lt,(0,i.toDisplayString)(e.$t("widgets")),1)],2)])])),_:1})])),_:1})])),_:1}),(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(r,{shadow:"never",class:"settings-item-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{gutter:10,style:{"padding-top":"10px","padding-bottom":"10px"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:24},{default:(0,i.withCtx)((()=>[s.index&&e.widgetsFileExists||!s.index&&e.sectionsFileExists?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:0},[s.index?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0,data:s.jsonData,onUpdate:o.updateJSONData,onSave:o.saveJSONData},null,8,["data","onUpdate","onSave"])):((0,i.openBlock)(),(0,i.createBlock)(h,{key:1,data:s.jsonData,onUpdate:o.updateJSONData,onSave:o.saveJSONData},null,8,["data","onUpdate","onSave"]))],64)):((0,i.openBlock)(),(0,i.createBlock)(p,{key:1,type:"warning",closable:!1,title:`${s.index?e.$t("unableLoadWidgets"):e.$t("unableLoadSections")}. ${e.$t("ensureValidTemplateAssociated")}`},null,8,["title"]))])),_:1})])),_:1})])),_:1})),[[u,s.isLoading]])],64)}var ot=a(97200);const nt={style:{"min-height":"400px"}},dt={class:"header",style:{width:"100%"}},rt={key:0},ct={class:"section-item-index"};function ht(e,t,a,l,s,o){const n=(0,i.resolveComponent)("font-awesome-icon"),d=(0,i.resolveComponent)("el-button"),r=ot.Z,c=(0,i.resolveComponent)("el-divider"),h=(0,i.resolveComponent)("el-col"),p=(0,i.resolveComponent)("el-input"),u=(0,i.resolveComponent)("el-input-number"),m=(0,i.resolveComponent)("el-tag"),g=(0,i.resolveComponent)("el-row"),w=(0,i.resolveComponent)("vue-draggable-next"),V=(0,i.resolveDirective)("loading");return(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("section",nt,[(0,i.createVNode)(r,{top:50,"z-index":1e3,style:{height:"50px"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",dt,[(0,i.createVNode)(d,{type:"primary",size:"default",onClick:t[0]||(t[0]=e=>o.addSection())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"plus",class:"mr-5"}),(0,i.createTextVNode)(" "+(0,i.toDisplayString)(e.$t("addSection")),1),s.sections.length?((0,i.openBlock)(),(0,i.createElementBlock)("span",rt," ("+(0,i.toDisplayString)(s.sections.length)+")",1)):(0,i.createCommentVNode)("",!0)])),_:1}),(0,i.createVNode)(d,{type:"danger",size:"default",disabled:!s.history.length||0==s.historyIndex,onClick:t[1]||(t[1]=e=>o.undo())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"undo"})])),_:1},8,["disabled"]),(0,i.createVNode)(d,{type:"danger",size:"default",disabled:!s.history.length||s.historyIndex+1>=s.history.length,onClick:t[2]||(t[2]=e=>o.redo())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"redo"})])),_:1},8,["disabled"]),(0,i.createVNode)(d,{size:"default",disabled:!s.dataHasChanged,onClick:t[3]||(t[3]=t=>e.$emit("save"))},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"save",class:"mr-5"}),(0,i.createTextVNode)(" "+(0,i.toDisplayString)(e.$t("save")),1)])),_:1},8,["disabled"])])])),_:1}),s.sections.length?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0})):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",null,[(0,i.createVNode)(w,{list:s.sections},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.sections,((t,a)=>((0,i.openBlock)(),(0,i.createBlock)(g,{key:a,gutter:10,class:"mb-10 mt-10 section-item"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{span:1,class:"drag-btn"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{style:{color:"dimgray"},icon:"grip-lines"})])),_:1}),(0,i.createVNode)(h,{span:1},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",ct,(0,i.toDisplayString)(a+1),1)])),_:2},1024),(0,i.createVNode)(h,{span:6},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{modelValue:t.sid,"onUpdate:modelValue":e=>t.sid=e,type:"text",size:"default",placeholder:e.$t("id"),onInput:e=>o.fixIdCase(e,a)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"])])),_:2},1024),(0,i.createVNode)(h,{span:6},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{modelValue:t.name_fr,"onUpdate:modelValue":e=>t.name_fr=e,type:"text",size:"default",placeholder:e.$t("nameInFrench")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024),(0,i.createVNode)(h,{span:6},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{modelValue:t.name_en,"onUpdate:modelValue":e=>t.name_en=e,type:"text",size:"default",placeholder:e.$t("nameInEnglish")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024),(0,i.createVNode)(h,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{type:"danger",size:"default",icon:"delete",style:{width:"100%"},onClick:e=>o.removeSection(a)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,i.createVNode)(h,{span:2}),(0,i.createVNode)(h,{span:9,class:"mt-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{effect:"dark",class:"categ-container"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.$t("linkedNewsCategories")),1),(0,i.createVNode)(u,{modelValue:t.news_categories,"onUpdate:modelValue":e=>t.news_categories=e,min:0,max:10,size:"small",style:{width:"75px"},"controls-position":"right"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),(0,i.createVNode)(h,{span:9,class:"mt-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{effect:"dark",class:"categ-container"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.$t("linkedECommerceCategories")),1),(0,i.createVNode)(u,{modelValue:t.e_commerce_categories,"onUpdate:modelValue":e=>t.e_commerce_categories=e,min:0,max:10,size:"small",style:{width:"75px"},"controls-position":"right"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["list"])])])),[[V,s.isLoading]])}var pt=a(21276),ut={name:"Sections",components:{VueDraggableNext:pt.VueDraggableNext},props:{data:{type:String,default:""}},emits:["update","save"],data(){return{isLoading:!1,pages:[],sections:[],initialSections:[],dataHasChanged:!1,history:[],historyIndex:0,canUpdateHistory:!0}},watch:{data:{handler(e,t){this.objectToArray()},deep:!0},sections:{handler(e,t){this.dataHasChanged=!this.$_.isEqual(this.$_.keyBy(e,"sid"),this.data),this.$emit("update",this.dataHasChanged,this.sections.length,this.$_.keyBy(this.sections,"sid"),this.$_.keyBy(this.sections.filter((e=>e.sid&&e.name_fr&&e.name_en&&"number"==typeof e.news_categories&&"number"==typeof e.e_commerce_categories)),"sid")),this.dataHasChanged&&this.updateHistory(e)},deep:!0}},created(){this.objectToArray(),this.fetchPages()},methods:{...(0,u.mapActions)("page",["getAllPages"]),objectToArray(){const e=[];this.data&&this.$_.forIn(this.$_.cloneDeep(this.data),(function(t,a){e.push(t)})),this.sections=this.$_.cloneDeep(e),this.initialSections=this.$_.cloneDeep(e),this.canUpdateHistory=!0,this.historyIndex=0,this.history=[]},async fetchPages(){this.isLoading=!0;const e=await this.getAllPages();e.data&&(this.pages=e.data),this.isLoading=!1},addSection(){this.sections.push({uid:this.$uuidv4(),sid:"",name_fr:"",name_en:"",news_categories:0,e_commerce_categories:0})},removeSection(e){const t=[],a=this.sections[e]?.uid;this.pages.forEach((e=>{let i,l;try{i=JSON.parse(e.top_sections)}catch(s){i=[]}try{l=JSON.parse(e.bottom_sections)}catch(s){l=[]}i.includes(a)&&t.push({id:e.id,placement:"top",list:i.filter((e=>e!=a))}),l.includes(a)&&t.push({id:e.id,placement:"bottom",list:l.filter((e=>e!=a))})})),t.length?this.$confirm(this.$t("deleteSectionQuestion"),this.$t("delete"),{confirmButtonText:this.$t("yes"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((async()=>{await this.removeSectionFromPages(t),this.sections.splice(e,1)})).catch((()=>{})):this.sections.splice(e,1)},async removeSectionFromPages(e){const t=this.$message({message:this.$t("pleaseWait"),duration:0});for(let a=0;a<e.length;a++){const t="top"==e[a].placement?{top_sections:JSON.stringify(e[a].list)}:{bottom_sections:JSON.stringify(e[a].list)};await this.updateItemInDB({context:Ze.x,id:e[a].id,data:t})}await this.fetchPages(),t.close()},fixIdCase(e,t){this.sections[t].sid=this.$_.snakeCase(e)},updateHistory(e){this.canUpdateHistory&&(this.history.length=this.historyIndex+1,this.history.push(this.$_.cloneDeep(e)),this.historyIndex++),this.canUpdateHistory=!0},undo(){this.historyIndex>0&&(this.canUpdateHistory=!1,this.historyIndex--,0==this.historyIndex?this.sections=this.$_.cloneDeep(this.initialSections):this.sections=this.$_.cloneDeep(this.history[this.historyIndex]))},redo(){this.historyIndex+1<this.history.length&&(this.canUpdateHistory=!1,this.historyIndex++,this.sections=this.$_.cloneDeep(this.history[this.historyIndex]))}}};const mt=(0,B.Z)(ut,[["render",ht],["__scopeId","data-v-42f453ef"]]);var gt=mt;const wt={style:{"min-height":"400px"}},Vt={class:"header"},Ct={key:0},Nt=["id"],ft={style:{display:"flex","align-items":"center","justify-content":"space-between"}},yt={style:{display:"flex","align-items":"center","justify-content":"space-between"}},xt={key:0},bt={class:"widget-item"},vt={key:0,class:"widget-item-data"},_t={key:0,class:"widget-item-row mb-10 mt-10"},St={style:{display:"flex","align-items":"center","justify-content":"space-between"}};function $t(e,t,a,l,s,o){const n=(0,i.resolveComponent)("font-awesome-icon"),d=(0,i.resolveComponent)("el-button"),r=ot.Z,c=(0,i.resolveComponent)("el-divider"),h=(0,i.resolveComponent)("ArrowRight"),p=(0,i.resolveComponent)("ArrowDown"),u=(0,i.resolveComponent)("el-icon"),m=(0,i.resolveComponent)("el-tag"),g=(0,i.resolveComponent)("el-col"),w=(0,i.resolveComponent)("el-row"),V=(0,i.resolveComponent)("el-input"),C=(0,i.resolveComponent)("el-checkbox"),N=(0,i.resolveComponent)("FormItemData"),f=(0,i.resolveComponent)("vue-draggable-next"),y=(0,i.resolveComponent)("el-collapse-transition"),x=(0,i.resolveDirective)("loading");return(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("section",wt,[(0,i.createVNode)(r,{top:50,"z-index":1e3,style:{height:"45px"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",Vt,[(0,i.createVNode)(d,{type:"primary",size:"small",onClick:t[0]||(t[0]=e=>o.addWidget())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"plus"}),(0,i.createTextVNode)("  "+(0,i.toDisplayString)(e.$t("add")),1),s.widgets.length?((0,i.openBlock)(),(0,i.createElementBlock)("span",Ct," ("+(0,i.toDisplayString)(s.widgets.length)+")",1)):(0,i.createCommentVNode)("",!0)])),_:1}),(0,i.createVNode)(d,{type:"warning",size:"small",onClick:t[1]||(t[1]=e=>o.toggleCollapses())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:-1==s.collapses.findIndex((e=>e.isCollapsed))?"expand":"compress"},null,8,["icon"]),(0,i.createTextVNode)("  "+(0,i.toDisplayString)(-1==s.collapses.findIndex((e=>e.isCollapsed))?e.$t("closeAll"):e.$t("openAll")),1)])),_:1}),(0,i.createVNode)(d,{type:"success",size:"small",disabled:s.scrollTopY<75,onClick:t[2]||(t[2]=e=>o.scrollToTop())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"arrow-up"}),(0,i.createTextVNode)("  "+(0,i.toDisplayString)(e.$t("top")),1)])),_:1},8,["disabled"]),(0,i.createVNode)(d,{type:"success",size:"small",disabled:s.scrollAtBottom,onClick:t[3]||(t[3]=e=>o.scrollToBottom())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"arrow-down"}),(0,i.createTextVNode)("  "+(0,i.toDisplayString)(e.$t("bottom")),1)])),_:1},8,["disabled"]),(0,i.createVNode)(d,{type:"info",size:"small",disabled:0==s.psid,onClick:t[4]||(t[4]=e=>o.scrollToPrevious())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"angle-double-up"}),(0,i.createTextVNode)("  "+(0,i.toDisplayString)(e.$t("previous")),1)])),_:1},8,["disabled"]),(0,i.createVNode)(d,{type:"info",size:"small",disabled:s.psid+1==s.widgets.length||s.scrollAtBottom,onClick:t[5]||(t[5]=e=>o.scrollToNext())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"angle-double-down"}),(0,i.createTextVNode)("  "+(0,i.toDisplayString)(e.$t("next")),1)])),_:1},8,["disabled"]),(0,i.createVNode)(d,{type:"danger",size:"small",disabled:!s.history.length||0==s.historyIndex,onClick:t[6]||(t[6]=e=>o.undo())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"undo"})])),_:1},8,["disabled"]),(0,i.createVNode)(d,{type:"danger",size:"small",disabled:!s.history.length||s.historyIndex+1>=s.history.length,onClick:t[7]||(t[7]=e=>o.redo())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"redo"})])),_:1},8,["disabled"]),(0,i.createVNode)(d,{size:"small",disabled:!s.dataHasChanged,onClick:t[8]||(t[8]=e=>o.save())},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{icon:"save"}),(0,i.createTextVNode)("  "+(0,i.toDisplayString)(e.$t("save")),1)])),_:1},8,["disabled"])])])),_:1}),s.widgets.length?((0,i.openBlock)(),(0,i.createBlock)(c,{key:0})):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("div",null,[(0,i.createVNode)(f,{list:s.widgets},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.widgets,((t,a)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{id:"wid--"+a,key:a,class:"mb-10 mt-5"},[(0,i.createVNode)(w,{gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(g,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{effect:"dark",class:"widget-header"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",ft,[(0,i.createElementVNode)("div",yt,[(0,i.createVNode)(u,{class:"mr-10",style:{cursor:"pointer","font-weight":"bold"},onClick:e=>o.getCollapse(t.uid).isCollapsed=!o.getCollapse(t.uid)?.isCollapsed},{default:(0,i.withCtx)((()=>[o.getCollapse(t.uid)?.isCollapsed?((0,i.openBlock)(),(0,i.createBlock)(h,{key:0})):((0,i.openBlock)(),(0,i.createBlock)(p,{key:1}))])),_:2},1032,["onClick"]),(0,i.createVNode)(n,{class:"drag-btn mr-10",icon:"grip-lines"}),(0,i.createVNode)(m,{effect:"dark",size:"default",color:"white",class:"mr-5",style:{color:"dimgray"}},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(a+1),1)])),_:2},1024),(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(e.$t("widget")),1),t.wid?((0,i.openBlock)(),(0,i.createElementBlock)("span",xt," - "+(0,i.toDisplayString)(t.wid),1)):(0,i.createCommentVNode)("",!0)]),(0,i.createElementVNode)("div",null,[(0,i.createVNode)(d,{link:"",size:"default",icon:"files",style:{color:"white"},class:"ml-5 mr-5",onClick:e=>o.duplicateWidget(a)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("duplicate")),1)])),_:2},1032,["onClick"]),(0,i.withDirectives)((0,i.createVNode)(d,{link:"",size:"default",icon:"minus",style:{color:"white"},class:"ml-5 mr-5",onClick:e=>o.addWidgetDataRow(a)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("insertRow")),1)])),_:2},1032,["onClick"]),[[i.vShow,!o.getCollapse(t.uid)?.isCollapsed]]),(0,i.withDirectives)((0,i.createVNode)(d,{link:"",size:"default",icon:"plus",style:{color:"white"},class:"ml-5 mr-5",onClick:e=>o.addWidgetDataItem(a)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("addInput")),1)])),_:2},1032,["onClick"]),[[i.vShow,!o.getCollapse(t.uid)?.isCollapsed]]),(0,i.withDirectives)((0,i.createVNode)(d,{link:"",size:"default",icon:"delete",style:{color:"white"},class:"ml-5 mr-5",onClick:e=>o.removeWidget(a)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("delete")),1)])),_:2},1032,["onClick"]),[[i.vShow,!o.getCollapse(t.uid)?.isCollapsed]])])])])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,i.createVNode)(y,null,{default:(0,i.withCtx)((()=>[(0,i.withDirectives)((0,i.createElementVNode)("div",bt,[(0,i.createVNode)(w,{gutter:10,class:"mb-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(g,{span:6},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(V,{modelValue:t.wid,"onUpdate:modelValue":e=>t.wid=e,type:"text",size:"default",placeholder:e.$t("id"),onInput:e=>o.fixIdCase(e,a)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"])])),_:2},1024),(0,i.createVNode)(g,{span:6},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(V,{modelValue:t.name_fr,"onUpdate:modelValue":e=>t.name_fr=e,type:"text",size:"default",placeholder:e.$t("nameInFrench")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024),(0,i.createVNode)(g,{span:6},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(V,{modelValue:t.name_en,"onUpdate:modelValue":e=>t.name_en=e,type:"text",size:"default",placeholder:e.$t("nameInEnglish")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024),(0,i.createVNode)(g,{span:3},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(C,{modelValue:t.duplicable,"onUpdate:modelValue":e=>t.duplicable=e,size:"default",label:e.$t("duplicable")},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024),(0,i.createVNode)(g,{span:3},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(C,{modelValue:t.fullscreen,"onUpdate:modelValue":e=>t.fullscreen=e,size:"default",label:e.$t("fullscreen")},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024),t.data&&e.$_.isArray(t.data)&&t.data.length?((0,i.openBlock)(),(0,i.createElementBlock)("div",vt,[(0,i.createVNode)(c,{style:{"background-color":"white"}},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("form")),1)])),_:1}),(0,i.createVNode)(f,{list:t.data},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(t.data,((t,l)=>((0,i.openBlock)(),(0,i.createBlock)(w,{key:l+"A",gutter:10,style:{cursor:"move"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(g,{span:24},{default:(0,i.withCtx)((()=>[e.$_.isArray(t)?((0,i.openBlock)(),(0,i.createElementBlock)("section",_t,[(0,i.createVNode)(w,{gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(g,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{effect:"dark",type:"warning",class:"range-header"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",St,[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.$t("row")),1),(0,i.createElementVNode)("div",null,[(0,i.createVNode)(d,{link:"",size:"default",icon:"plus",title:e.$t("addInput"),style:{color:"white"},class:"mr-5",onClick:e=>o.addWidgetDataSubItem(a,l)},null,8,["title","onClick"]),(0,i.createVNode)(d,{link:"",size:"default",icon:"delete",title:e.$t("deleteRow"),style:{color:"white"},class:"ml-5",onClick:e=>o.removeWidgetDataItem(a,l)},null,8,["title","onClick"])])])])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,i.createVNode)(f,{list:t},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(t,((e,t)=>((0,i.openBlock)(),(0,i.createBlock)(N,{key:t+"B",item:e,class:"mb-5 mt-10",style:{padding:"0 5px 0 5px"},onRemove:e=>o.removeWidgetDataSubItem(a,l,t),onUpdateItemData:e=>o.updateWidgetDataSubItem(a,l,t,e)},null,8,["item","onRemove","onUpdateItemData"])))),128))])),_:2},1032,["list"])])):((0,i.openBlock)(),(0,i.createBlock)(N,{key:1,item:t,class:"mb-10 mt-10",style:{padding:"0 5px 0 5px"},onRemove:e=>o.removeWidgetDataItem(a,l),onUpdateItemData:e=>o.updateWidgetDataItem(a,l,e)},null,8,["item","onRemove","onUpdateItemData"]))])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["list"])])):(0,i.createCommentVNode)("",!0)],512),[[i.vShow,!o.getCollapse(t.uid)?.isCollapsed]])])),_:2},1024)],8,Nt)))),128))])),_:1},8,["list"])])])),[[x,s.isLoading]])}var kt=a(24044);function Et(e,t,a,l,s,o){const n=(0,i.resolveComponent)("el-input"),d=(0,i.resolveComponent)("el-col"),r=(0,i.resolveComponent)("el-option"),c=(0,i.resolveComponent)("el-select"),h=(0,i.resolveComponent)("el-input-number"),p=(0,i.resolveComponent)("el-checkbox"),u=(0,i.resolveComponent)("el-button"),m=(0,i.resolveComponent)("el-row");return(0,i.openBlock)(),(0,i.createBlock)(m,{gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{modelValue:a.item.id,"onUpdate:modelValue":t[0]||(t[0]=e=>a.item.id=e),type:"text",size:"default",placeholder:e.$t("id"),onInput:t[1]||(t[1]=e=>o.fixCase(e,"id"))},null,8,["modelValue","placeholder"])])),_:1}),(0,i.createVNode)(d,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{modelValue:a.item.type,"onUpdate:modelValue":t[2]||(t[2]=e=>a.item.type=e),filterable:"",size:"default",style:{width:"100%"},placeholder:e.$t("type"),"no-data-text":e.$t("noData"),"no-match-text":e.$t("noMatchingData")},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.formItemTypes,(e=>((0,i.openBlock)(),(0,i.createBlock)(r,{key:e.id,value:e.id,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue","placeholder","no-data-text","no-match-text"])])),_:1}),(0,i.createVNode)(d,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{modelValue:a.item.label_fr,"onUpdate:modelValue":t[3]||(t[3]=e=>a.item.label_fr=e),type:"text",size:"default",placeholder:e.$t("labelInFrench")},null,8,["modelValue","placeholder"])])),_:1}),(0,i.createVNode)(d,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{modelValue:a.item.label_en,"onUpdate:modelValue":t[4]||(t[4]=e=>a.item.label_en=e),type:"text",size:"default",placeholder:e.$t("labelInEnglish")},null,8,["modelValue","placeholder"])])),_:1}),(0,i.createVNode)(d,{span:3},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{modelValue:a.item.width,"onUpdate:modelValue":t[5]||(t[5]=e=>a.item.width=e),modelModifiers:{number:!0},min:1,max:24,size:"default",style:{width:"100%"},"controls-position":"right",placeholder:e.$t("width")},null,8,["modelValue","placeholder"])])),_:1}),(0,i.createVNode)(d,{span:3},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{modelValue:a.item.required,"onUpdate:modelValue":t[6]||(t[6]=e=>a.item.required=e),size:"default",label:e.$t("required")},null,8,["modelValue","label"])])),_:1}),(0,i.createVNode)(d,{span:2},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{type:"danger",size:"default",icon:"delete",style:{width:"100%"},onClick:t[7]||(t[7]=t=>e.$emit("remove"))})])),_:1}),"icon"==a.item.type||"multipleicon"==a.item.type?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,span:8,class:"mt-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{modelValue:o.selectorItemOption,"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectorItemOption=e),size:"default",style:{width:"100%"},multiple:"",filterable:"","tag-type":"warning","suffix-icon":"setting",placeholder:e.$t("addLibraries"),"no-data-text":e.$t("noData"),"no-match-text":e.$t("noMatchingData")},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.iconLibraries,(e=>((0,i.openBlock)(),(0,i.createBlock)(r,{key:e,value:e,label:e},null,8,["value","label"])))),128))])),_:1},8,["modelValue","placeholder","no-data-text","no-match-text"])])),_:1})):(0,i.createCommentVNode)("",!0),"select"==a.item.type||"multiselect"==a.item.type?((0,i.openBlock)(),(0,i.createBlock)(d,{key:1,span:8,class:"mt-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{modelValue:o.selectorItemOption,"onUpdate:modelValue":t[9]||(t[9]=e=>o.selectorItemOption=e),size:"default",style:{width:"100%"},multiple:"",filterable:"","allow-create":"","tag-type":"warning","default-first-option":"","suffix-icon":"setting","reserve-keyword":!1,placeholder:e.$t("addOptions"),"no-data-text":e.$t("addAndClickOnEnter"),"no-match-text":e.$t("addAndClickOnEnter")},null,8,["modelValue","placeholder","no-data-text","no-match-text"])])),_:1})):(0,i.createCommentVNode)("",!0),"linkedwidget"==a.item.type?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:2},[(0,i.createVNode)(d,{span:8,class:"mt-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{modelValue:o.linkedWidgetItemOptionWid,"onUpdate:modelValue":t[10]||(t[10]=e=>o.linkedWidgetItemOptionWid=e),type:"text",size:"default",placeholder:e.$t("linkedWid")},null,8,["modelValue","placeholder"])])),_:1}),(0,i.createVNode)(d,{span:8,class:"mt-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{modelValue:o.linkedWidgetItemOptionLabel,"onUpdate:modelValue":t[11]||(t[11]=e=>o.linkedWidgetItemOptionLabel=e),type:"text",size:"default",placeholder:e.$t("fieldId")},null,8,["modelValue","placeholder"])])),_:1})],64)):(0,i.createCommentVNode)("",!0),a.item.type.includes("category")||a.item.type.includes("categories")?((0,i.openBlock)(),(0,i.createBlock)(d,{key:3,span:8,class:"mt-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{modelValue:o.includeSubCategoriesOption,"onUpdate:modelValue":t[12]||(t[12]=e=>o.includeSubCategoriesOption=e),size:"small","true-label":"1","false-label":"0",label:e.$t("includeSubCategories"),style:{width:"100%"},border:""},null,8,["modelValue","label"])])),_:1})):(0,i.createCommentVNode)("",!0)])),_:1})}var Dt={name:"FormItemData",props:{item:{required:!0,type:Object}},emits:["remove","updateItemData"],data(){return{formItemTypes:[{id:"text",label:this.$t("text")},{id:"text-multilingual",label:this.$t("text")+" - "+this.$t("multilingual")},{id:"textarea",label:this.$t("longText")},{id:"textarea-multilingual",label:this.$t("longText")+" - "+this.$t("multilingual")},{id:"number",label:this.$t("number")},{id:"image",label:this.$t("image")},{id:"image-gallery",label:this.$t("imageGallery")},{id:"video-gallery",label:this.$t("videoGallery")},{id:"html",label:this.$t("htmlContent")},{id:"html-multilingual",label:this.$t("htmlContent")+" - "+this.$t("multilingual")},{id:"checkbox",label:this.$t("checkbox")},{id:"video",label:this.$t("video")},{id:"file",label:this.$t("file")},{id:"color",label:this.$t("color")},{id:"date",label:this.$t("date")},{id:"list",label:this.$t("list")},{id:"slug",label:this.$t("slug")},{id:"icon",label:this.$t("uniqueIcon")},{id:"multipleicon",label:this.$t("multipleIcon")},{id:"select",label:this.$t("uniqueSelection")},{id:"multiselect",label:this.$t("multipleSelection")},{id:"linkedwidget",label:this.$t("linkedWidget")},{id:"e-commerce-single-product",label:this.$t("eCommerce")+" - "+this.$t("singleProduct")},{id:"e-commerce-multiple-products",label:this.$t("eCommerce")+" - "+this.$t("multipleProducts")},{id:"e-commerce-single-category",label:this.$t("eCommerce")+" - "+this.$t("singleCategory")},{id:"e-commerce-multiple-categories",label:this.$t("eCommerce")+" - "+this.$t("multipleCategories")},{id:"news-single-article",label:this.$t("news")+" - "+this.$t("singleArticle")},{id:"news-multiple-articles",label:this.$t("news")+" - "+this.$t("multipleArticles")},{id:"news-single-category",label:this.$t("news")+" - "+this.$t("singleCategory")},{id:"news-multiple-categories",label:this.$t("news")+" - "+this.$t("multipleCategories")}],iconLibraries:["antd","carbon","fa","fluent","ionicons4","ionicons5","material","tabler"]}},computed:{selectorItemOption:{get(){let e;try{e=JSON.parse(this.item.option)}catch(t){e=[]}return e},set(e){this.item.option=JSON.stringify(e)}},includeSubCategoriesOption:{get(){return this.item.option||(this.item.option="1"),this.item.option},set(e){this.item.option=e}},linkedWidgetItemOptionWid:{get(){let e;try{e=JSON.parse(this.item.option)?.wid}catch(t){e=""}return e},set(e){const t={wid:this.$_.snakeCase(e),label:this.linkedWidgetItemOptionLabel};this.item.option=JSON.stringify(t)}},linkedWidgetItemOptionLabel:{get(){let e;try{e=JSON.parse(this.item.option)?.label}catch(t){e=""}return e},set(e){const t={wid:this.linkedWidgetItemOptionWid,label:this.$_.snakeCase(e)};this.item.option=JSON.stringify(t)}}},watch:{item:{handler(e,t){this.$emit("updateItemData",e)},deep:!0}},methods:{fixCase(e,t){this.item[t]=this.$_.snakeCase(e)}}};const It=(0,B.Z)(Dt,[["render",Et]]);var Bt=It,At={name:"Widgets",components:{VueDraggableNext:pt.VueDraggableNext,FormItemData:Bt},props:{data:{type:String,default:""}},emits:["update","save"],data(){return{isLoading:!1,widgets:[],collapses:[],widgetsData:[],initialWidgets:[],dataHasChanged:!1,newDataItem:{id:"",type:"",option:"",label_fr:"",label_en:"",width:24,required:!0},psid:0,scrollTopY:0,scrollAtBottom:!1,history:[],historyIndex:0,canUpdateHistory:!0}},watch:{data:{handler(e,t){this.objectToArray()},deep:!0},widgets:{handler(e,t){this.dataHasChanged=!this.$_.isEqual(this.$_.keyBy(e,"wid"),this.data),this.$emit("update",this.dataHasChanged,this.widgets.length,this.$_.keyBy(this.widgets,"wid"),this.$_.keyBy(this.widgets.filter((e=>e.wid&&e.name_fr&&e.name_en)),"wid")),this.dataHasChanged&&this.updateHistory(e)},deep:!0}},created(){this.objectToArray(),this.fetchWidgetsData()},mounted(){window.addEventListener("scroll",this.onScroll),this.scrollAtBottom=window.innerHeight+window.scrollY>=document.body.scrollHeight},beforeUnmount(){window.removeEventListener("scroll",this.onScroll)},methods:{...(0,u.mapActions)("widget",["getAllWidgets"]),objectToArray(){var e=[];this.collapses=[],this.data&&this.$_.forIn(this.$_.cloneDeep(this.data),((t,a)=>{e.push(t),this.collapses.push({uid:t.uid,isCollapsed:!0})})),this.widgets=this.$_.cloneDeep(e),this.initialWidgets=this.$_.cloneDeep(e),this.canUpdateHistory=!0,this.historyIndex=0,this.history=[],setTimeout((()=>{this.scrollToTop()}),500)},async fetchWidgetsData(){this.isLoading=!0;const e=await this.getAllWidgets();e.data&&(this.widgetsData=e.data),this.isLoading=!1},fixIdCase(e,t){this.widgets[t].wid=this.$_.snakeCase(e)},getCollapse(e){return this.collapses.find((t=>t.uid==e))},genDuplicateWid(e,t=1){const a=e+"_"+t;return this.widgets.findIndex((e=>e.wid==a))>-1?this.genDuplicateWid(e,t+1):a},addWidget(){const e=this.$uuidv4();this.widgets.push({uid:e,wid:"",duplicable:!1,name_fr:"",name_en:"",fullscreen:!1,data:[]}),this.collapses.push({uid:e,isCollapsed:!1}),setTimeout((()=>{this.scrollToBottom()}),500)},removeWidget(e){const t=this.widgets[e]?.uid,a=this.widgetsData.filter((e=>e.uid==t));a.length?this.$confirm(this.$t("deleteWidgetDataQuestion"),this.$t("delete"),{confirmButtonText:this.$t("yes"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((async()=>{this.collapses=this.collapses.filter((t=>t.uid!=this.widgets[e]?.uid)),this.widgets.splice(e,1)})).catch((()=>{})):(this.collapses=this.collapses.filter((t=>t.uid!=this.widgets[e]?.uid)),this.widgets.splice(e,1))},async removeLinkedWidgetsData(e){const t=this.$message({message:this.$t("pleaseWait"),duration:0});for(let a=0;a<e.length;a++)await this.deleteItemInDB({context:kt.X,id:e[a].id});await this.fetchWidgetsData(),t.close()},duplicateWidget(e){const t=this.$_.cloneDeep(this.widgets[e]);t.wid=this.genDuplicateWid(t.wid),t.uid=this.$uuidv4(),this.widgets.push(t),this.collapses.push({uid:t.uid,isCollapsed:!1}),setTimeout((()=>{this.scrollToBottom()}),500)},addWidgetDataRow(e){this.widgets[e].data&&this.$_.isArray(this.widgets[e].data)?this.widgets[e].data.push([]):this.widgets[e].data=[[]]},addWidgetDataItem(e){this.widgets[e].data&&this.$_.isArray(this.widgets[e].data)?this.widgets[e].data.push(this.$_.cloneDeep(this.newDataItem)):this.widgets[e].data=[this.$_.cloneDeep(this.newDataItem)]},updateWidgetDataItem(e,t,a){this.widgets[e].data[t]=a},removeWidgetDataItem(e,t){this.widgets[e].data.splice(t,1)},addWidgetDataSubItem(e,t){this.widgets[e].data[t]&&this.$_.isArray(this.widgets[e].data[t])?this.widgets[e].data[t].push(this.$_.cloneDeep(this.newDataItem)):this.widgets[e].data[t]=[this.$_.cloneDeep(this.newDataItem)]},updateWidgetDataSubItem(e,t,a,i){this.widgets[e].data[t][a]=i},removeWidgetDataSubItem(e,t,a){this.widgets[e].data[t].splice(a,1)},toggleCollapses(){this.collapses=this.collapses.map((e=>({uid:e.uid,isCollapsed:-1==this.collapses.findIndex((e=>e.isCollapsed))})))},onScroll(e){this.scrollTopY=e.target.documentElement.scrollTop,this.scrollAtBottom=window.innerHeight+window.scrollY>=document.body.scrollHeight,this.scrollTopY<75&&(this.psid=0)},scrollToBottom(){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},scrollToNext(){this.psid+1<this.widgets.length&&!this.scrollAtBottom&&this.psid++,this.scrollToWidget()},scrollToPrevious(){this.psid>0&&this.psid--,this.scrollToWidget()},scrollToWidget(){const e=this.collapses.filter((e=>e.isCollapsed)).length,t=this.collapses.filter((e=>!e.isCollapsed)).length;e>0&&t>0&&(this.collapses=e>t?this.collapses.map((e=>({uid:e.uid,isCollapsed:!0}))):this.collapses.map((e=>({uid:e.uid,isCollapsed:!1}))),(0,n._v)(500)),this.$smoothScroll({scrollTo:document.getElementById("wid--"+this.psid),updateHistory:!1,duration:1e3,offset:-150})},updateHistory(e){this.canUpdateHistory&&(this.history.length=this.historyIndex+1,this.history.push(this.$_.cloneDeep(e)),this.historyIndex++),this.canUpdateHistory=!0},undo(){this.historyIndex>0&&(this.canUpdateHistory=!1,this.historyIndex--,0==this.historyIndex?this.widgets=this.$_.cloneDeep(this.initialWidgets):this.widgets=this.$_.cloneDeep(this.history[this.historyIndex]))},redo(){this.historyIndex+1<this.history.length&&(this.canUpdateHistory=!1,this.historyIndex++,this.widgets=this.$_.cloneDeep(this.history[this.historyIndex]))},async save(){for(let e=0;e<this.widgetsData.length;e++){const t=this.widgetsData[e],a=this.widgets.find((e=>e.uid==t.uid));a?a.wid!=t.wid&&await this.updateItemInDB({context:kt.X,id:t.id,data:{wid:a.wid}}):await this.deleteItemInDB({context:kt.X,id:t.id})}await this.fetchWidgetsData(),this.$emit("save")}}};const Tt=(0,B.Z)(At,[["render",$t],["__scopeId","data-v-5e7030e8"]]);var Mt=Tt,Ut={name:"UiEditor",components:{Sections:gt,Widgets:Mt},data(){return{index:0,jsonData:{},oldJsonData:{},currentData:{},inputsNumber:0,isLoading:!1,dataHasChanged:!1,parent:this.$parent.$parent.$parent}},computed:{...(0,p.mapWritableState)(r.d,["uiEditorIndex"])},async created(){this.index=this.uiEditorIndex,this.isLoading=!0,await this.loadJSONData(),this.isLoading=!1,this.jsonData=this.index?this.widgetsJSONData:this.sectionsJSONData,this.oldJsonData=this.$_.cloneDeep(this.jsonData)},methods:{switchJSONData(e){e?this.dataHasChanged?this.confirmSwitching(this.widgetsJSONData,e):this.updateContent(this.widgetsJSONData,e):this.dataHasChanged?this.confirmSwitching(this.sectionsJSONData,e):this.updateContent(this.sectionsJSONData,e)},confirmSwitching(e,t){this.$confirm(this.$t("discardChanges"),this.$t("confirm"),{confirmButtonText:this.$t("yes"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((async()=>{this.updateContent(e,t)})).catch((()=>{}))},updateContent(e,t){this.jsonData=e,this.dataHasChanged=!1,this.index=t,this.uiEditorIndex=t},updateJSONData(e,t,a,i){this.dataHasChanged=e,this.currentData=i,this.inputsNumber=t},async saveJSONData(){let e=0;if(this.$_.forIn(this.currentData,((t,a)=>{e++})),this.inputsNumber!=e)return this.$message.warning(this.$t("pleaseFillInAllFields")),!1;const t=await this.parent.updateJSON({data:this.formatDataKeys(this.currentData),file:this.index?"widgets":"sections"});t.success&&t.data?(await this.loadJSONData(),this.jsonData=this.index?this.widgetsJSONData:this.sectionsJSONData,this.oldJsonData=this.$_.cloneDeep(this.jsonData),this.$message.success(this.$t("success"))):this.$message.error(this.$t("anErrorOccured"))},formatDataKeys(e){const t={};return this.$_.forIn(e,((e,a)=>{const i=this.$_.cloneDeep(e);this.index?(i.wid=this.$_.snakeCase(a),t[i.wid]=i):(i.sid=this.$_.snakeCase(a),t[i.sid]=i)})),t}}};const Ot=(0,B.Z)(Ut,[["render",st],["__scopeId","data-v-732c0bf7"]]);var Lt=Ot;const Ft={name:"AppSettings",components:{JsonEditor:j,UiEditor:Lt,Medias:de,Modules:De,General:R,Advanced:T,TemplateInfo:tt,Notifications:Le},mixins:[h.Z,c.Z],data(){return{currentTab:"",ThumbnailFormats:d.vh,Settings:d.Zr,VarTypes:d.o8,constants:o,languages:[],thumbnailFormats:[],defaultThumbnails:[]}},computed:{...(0,p.mapWritableState)(r.d,["appSettingsTab"]),...(0,u.mapGetters)({getUserSectionScope:"access/getUserSectionScope",getUserActionScope:"access/getUserActionScope",getSettingValue:"setting/getSettingValue"}),descBorderColor(){return this.pickByTheme("lightgray","#9c9c9c")},tabsBgColor(){return this.pickByTheme("whitesmoke","#4c4c4c")},tabsBorderBottomColor(){return this.pickByTheme("silver","whitesmoke")}},created(){this.$_.forIn(d.lI,((e,t)=>{this.languages.push(e)})),this.$_.forIn(d.vh,((e,t)=>{this.thumbnailFormats.push(e)})),this.$_.forIn(d.Pl,((e,t)=>{const a=this.$_.cloneDeep(e);a.editable=!1,this.defaultThumbnails.push(a)})),this.devMode&&this.getUserSectionScope("EDITOR_SECTION")||!this.appSettingsTab||!this.appSettingsTab.includes("editor")?this.currentTab=this.appSettingsTab:this.currentTab="general"},methods:{formatDate:n.p6,...(0,u.mapActions)("setting",["getAllSettings","updateSetting","addSetting","updateFolder","updateJSON","deleteTemplate","installTemplate"]),handleClick(e,t){this.appSettingsTab=e.paneName}}},Pt=()=>{(0,i.useCssVars)((e=>({"01b79b84":e.tabsBorderBottomColor,ac15d114:e.tabsBgColor,"2c09b6fc":e.descBorderColor})))},Rt=Ft.setup;Ft.setup=Rt?(e,t)=>(Pt(),Rt(e,t)):Pt;var zt=Ft;const Wt=(0,B.Z)(zt,[["render",s],["__scopeId","data-v-6f1526fb"]]);var Jt=Wt},31567:function(e,t,a){var i=a(14340),l=a(21101);t["Z"]={created(){const e=-1===this.restrictedScopes.findIndex((e=>this.$route.name.includes(e.value)));e||this.$router.replace(i.Z5.LOGIN.PATH)},computed:{...(0,l.mapState)({userData:e=>e.session.userData,accessList:e=>e.access.accessList}),...(0,l.mapGetters)({userScopes:"access/getUserScopes",restrictedScopes:"access/getUserRestrictedScopes",disabledModuleScopes:"access/getDisabledModuleScopes",userPageScopes:"access/getUserPageScopes",userActionScopes:"access/getUserActionScopes",userSectionScopes:"access/getUserSectionScopes",userPageScope:"access/getUserPageScope",userActionScope:"access/getUserActionScope",userSectionScope:"access/getUserSectionScope"})},methods:{...(0,l.mapActions)("access",["getAllAccess"]),getAccessName(e){const t=this.accessList.find((t=>t.id==e));return t?t.name:""}}}},38855:function(e,t,a){a(57658);var i=a(39355),l=a(14340),s=a(20747),o=a(21101);t["Z"]={data(){return{Routes:l.Z5,Currencies:l.Kt,WebsiteInfo:l.a,currencies:[]}},async created(){this.$_.forIn(l.Kt,((e,t)=>{this.currencies.push(e)})),this.$store.commit("global/updateCurrentPanelPath",this.$route.path,{root:!0});const e=await this.getItemFromDB({context:s.A,id:this.userData?.id});e.success&&e.data&&e.data.status==l.dp.DISABLED&&(this.destroySession(),this.$router.replace(l.Z5.LOGIN.PATH))},computed:{...(0,o.mapState)({userData:e=>e.session.userData}),...(0,o.mapGetters)({isUserConnected:"session/isUserConnected",getSettingValue:"setting/getSettingValue"})},methods:{formatDate:i.p6,reformatDate:i.bK,...(0,o.mapMutations)({destroySession:"session/destroySession"})}}}}]);
//# sourceMappingURL=group-settings.52a3f754.js.map