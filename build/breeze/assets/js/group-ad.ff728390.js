"use strict";(self["webpackChunkbreeze"]=self["webpackChunkbreeze"]||[]).push([[985],{39494:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(82234);function l(e,t,a,l,o,s){return(0,i.openBlock)(),(0,i.createElementBlock)("button",{onClick:t[0]||(t[0]=(...e)=>l.copy&&l.copy(...e))},[(0,i.renderSlot)(e.$slots,"default")])}var o=a(76109),s=a.n(o),r={name:"Copy",props:{toCopy:{type:String,default:""}},emits:["copy"],setup(e,t){const{toClipboard:a}=s()(),i=async()=>{try{await a(e.toCopy),t.emit("copy",e.toCopy,!0)}catch(i){console.error(i),t.emit("copy",e.toCopy,!1)}};return{copy:i}}},d=a(83744);const n=(0,d.Z)(r,[["render",l]]);var c=n},30780:function(e,t,a){a.d(t,{Z:function(){return d}});var i=a(82234);function l(e,t,a,l,o,s){const r=(0,i.resolveComponent)("el-col"),d=(0,i.resolveComponent)("el-button"),n=(0,i.resolveComponent)("el-row"),c=(0,i.resolveComponent)("el-input"),u=(0,i.resolveComponent)("el-scrollbar");return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"features",style:(0,i.normalizeStyle)(`background: ${e.pickByTheme("whitesmoke","dimgray")}`)},[(0,i.createVNode)(n,{class:"features-header mb-10"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{span:16,style:{"justify-content":"left"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("small",null,[(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(a.title),1)])])),_:1}),(0,i.createVNode)(r,{span:8,style:{"justify-content":"right"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{size:"default",type:"primary",disabled:a.disabled||a.addBtnDisabled,onClick:s.addFeature},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("add")),1)])),_:1},8,["disabled","onClick"])])),_:1})])),_:1}),(0,i.createVNode)(n,{class:"features-body mt-10"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{"max-height":"275px"},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(a.list,((t,l)=>((0,i.openBlock)(),(0,i.createBlock)(n,{key:"feature_"+l,gutter:5,class:"mb-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{span:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,type:"text",size:"default",placeholder:a.namePlaceholder||e.$t("name"),readonly:a.nameReadonly||a.disabled},null,8,["modelValue","onUpdate:modelValue","placeholder","readonly"])])),_:2},1024),(0,i.createVNode)(r,{span:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,type:"text",size:"default",placeholder:a.valuePlaceholder||e.$t("value"),readonly:a.valueReadonly||a.disabled},null,8,["modelValue","onUpdate:modelValue","placeholder","readonly"])])),_:2},1024),(0,i.createVNode)(r,{span:4},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{type:"danger",size:"default",icon:"delete",disabled:a.disabled||a.deleteBtnDisabled,style:{width:"100%"},onClick:e=>s.removeFeature(l)},null,8,["disabled","onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(n,{gutter:10,class:"features-footer"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{span:24},{default:(0,i.withCtx)((()=>[(0,i.renderSlot)(e.$slots,"features-footer",{},void 0,!0)])),_:3})])),_:3})],4)}a(57658);var o={props:{title:{type:String,default:""},list:{type:Array,default:()=>[]},namePlaceholder:{type:String,default:null},valuePlaceholder:{type:String,default:null},nameReadonly:{type:Boolean,default:!1},valueReadonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},addBtnDisabled:{type:Boolean,default:!1},deleteBtnDisabled:{type:Boolean,default:!1}},emits:["onFeatureAdd","onFeatureRemove"],methods:{addFeature(){this.$emit("onFeatureAdd"),this.list.push({name:"",value:""})},removeFeature(e){this.$emit("onFeatureRemove",e,this.list[e]),this.list.splice(e,1)}}},s=a(83744);const r=(0,s.Z)(o,[["render",l],["__scopeId","data-v-6c94250c"]]);var d=r},71561:function(e,t,a){a.d(t,{Z:function(){return v}});var i=a(89948),l=a(82234),o=a(75979);const s=e=>((0,l.pushScopeId)("data-v-725fb0c0"),e=e(),(0,l.popScopeId)(),e),r={class:"picker-container"},d={class:"picker-content"},n={key:0},c={class:"cropper-container"},u={class:"vertical-buttons"},p=s((()=>(0,l.createElementVNode)("br",null,null,-1))),h={class:"preview-container"},m={key:1,class:"text-center"},f={class:"picker-action"},g={class:"dialog-footer"},y={name:"ImageEditor",inheritAttrs:!1};var V=Object.assign(y,{props:{cropperAutoZoom:{type:Boolean,default:!0},cropperScalable:{type:Boolean,default:!1},cropperMovable:{type:Boolean,default:!1},cropperRatio:{type:Number,default:null},roundPreview:{type:Boolean,default:!1},previewWidth:{type:Number,default:null},previewHeight:{type:Number,default:120},src:{type:String,default:null}},emits:["croppedFileChange","save","cancel"],setup(e,{emit:t}){const a=e,{t:s}=(0,i.useI18n)(),y=(0,l.ref)(null),V=(0,l.ref)({coordinates:null,image:null}),w=(0,l.computed)((()=>a.previewWidth?a.previewWidth:V.value&&V.value.coordinates?V.value.coordinates.width/V.value.coordinates.height*a.previewHeight:a.previewHeight)),C=({coordinates:e,image:a})=>{V.value={coordinates:e,image:a};const{canvas:i}=y.value.getResult();t("croppedFileChange",V.value,i.toDataURL())},v=(e,t)=>{y.value.customImageTransforms.rotate%180!==0?y.value.flip(!e,!t):y.value.flip(e,t)},x=e=>{y.value.rotate(e)},N=()=>{const{canvas:e}=y.value.getResult();t("save",V.value,e.toDataURL())};return(e,i)=>{const b=(0,l.resolveComponent)("font-awesome-icon"),k=(0,l.resolveComponent)("n-alert"),E=(0,l.resolveComponent)("n-button");return(0,l.openBlock)(),(0,l.createElementBlock)("div",r,[(0,l.createElementVNode)("div",d,[a.src?((0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createElementVNode)("div",c,[(0,l.createVNode)((0,l.unref)(o.Cropper),{ref_key:"cropper",ref:y,class:"cropper",src:a.src,"auto-zoom":a.cropperAutoZoom,"stencil-props":{movable:a.cropperMovable,scalable:a.cropperScalable,aspectRatio:a.cropperRatio,previewClass:a.roundPreview?"circle-stencil-preview":""},"image-restriction":"stencil","background-class":"cropper-background","stencil-component":a.roundPreview?(0,l.unref)(o.CircleStencil):(0,l.unref)(o.RectangleStencil),onChange:C},null,8,["src","auto-zoom","stencil-props","stencil-component"]),(0,l.createElementVNode)("div",u,[(0,l.createElementVNode)("div",{class:"square-button",title:"Flip Horizontal",onClick:i[0]||(i[0]=e=>v(!0,!1))},[(0,l.createVNode)(b,{icon:["fas","arrows-alt-h"],size:"1x",style:{color:"white"}})]),(0,l.createElementVNode)("div",{class:"square-button",title:"Flip Vertical",onClick:i[1]||(i[1]=e=>v(!1,!0))},[(0,l.createVNode)(b,{icon:["fas","arrows-alt-v"],size:"1x",style:{color:"white"}})]),(0,l.createElementVNode)("div",{class:"square-button",title:"Rotate Clockwise",onClick:i[2]||(i[2]=e=>x(90))},[(0,l.createVNode)(b,{icon:["fas","redo"],size:"1x",style:{color:"white"}})]),(0,l.createElementVNode)("div",{class:"square-button",title:"Rotate Counter-Clockwise",onClick:i[3]||(i[3]=e=>x(-90))},[(0,l.createVNode)(b,{icon:["fas","undo"],size:"1x",style:{color:"white"}})])])]),p,(0,l.createElementVNode)("div",h,[(0,l.createVNode)((0,l.unref)(o.Preview),{ref:"preview",class:(0,l.normalizeClass)(["preview",{round:a.roundPreview}]),image:(0,l.unref)(V).image,width:(0,l.unref)(w),height:a.previewHeight,coordinates:(0,l.unref)(V).coordinates},null,8,["image","width","height","class","coordinates"])])])):((0,l.openBlock)(),(0,l.createElementBlock)("div",m,[(0,l.createVNode)(k,{title:(0,l.unref)(s)("noSrcFileWarning"),type:"warning","show-icon":""},null,8,["title"])])),(0,l.createElementVNode)("div",f,[(0,l.createElementVNode)("span",g,[(0,l.createVNode)(E,{onClick:i[4]||(i[4]=e=>t("cancel"))},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)((0,l.unref)(s)("close")),1)])),_:1}),a.src?((0,l.openBlock)(),(0,l.createBlock)(E,{key:0,type:"primary",onClick:i[5]||(i[5]=e=>N())},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)((0,l.unref)(s)("save")),1)])),_:1})):(0,l.createCommentVNode)("",!0)])])])])}}}),w=a(83744);const C=(0,w.Z)(V,[["__scopeId","data-v-725fb0c0"]]);var v=C},68716:function(e,t,a){a.d(t,{Z:function(){return ne}});var i=a(82234);function l(e,t,a,l,o,s){const r=(0,i.resolveComponent)("el-button"),d=(0,i.resolveComponent)("el-col"),n=(0,i.resolveComponent)("el-input"),c=(0,i.resolveComponent)("el-row"),u=(0,i.resolveComponent)("el-card");return(0,i.openBlock)(),(0,i.createBlock)(u,null,{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(o.items,((l,u)=>((0,i.openBlock)(),(0,i.createBlock)(c,{key:u,gutter:10,class:"mb-10 urls-container"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(d,{span:2},{default:(0,i.withCtx)((()=>[a.multiple?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,type:"primary",disabled:0===u&&a.multiple&&a.limit>0&&o.items.length>=a.limit,icon:0===u?"plus":"minus",onClick:e=>s.manageItems(u)},null,8,["disabled","icon","onClick"])):(0,i.createCommentVNode)("",!0)])),_:2},1024),(0,i.createVNode)(d,{span:20},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{modelValue:l.url,"onUpdate:modelValue":e=>l.url=e,placeholder:e.$t("insertLink"),style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024),(0,i.createVNode)(d,{span:2},{default:(0,i.withCtx)((()=>[0===u?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,type:"primary",disabled:!s.isUrlsValid,onClick:t[0]||(t[0]=e=>s.validate())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("validate")),1)])),_:1},8,["disabled"])):(0,i.createCommentVNode)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})}a(57658);var o=a(14340),s={name:"AddFromAnUrl",props:{multiple:{type:Boolean,default:!1},limit:{type:Number,default:0},acceptImages:{type:Boolean,default:!0},acceptVideos:{type:Boolean,default:!0},acceptAudios:{type:Boolean,default:!0},acceptDocuments:{type:Boolean,default:!0},acceptOtherTypes:{type:Boolean,default:!0}},emits:["validate"],data(){return{items:[{url:"http://"}],docExtList:["DOC","DOCX","HTML","HTM","ODT","PDF","XLS","XLSX","ODS","PPT","PPTX","TXT"],vidExtList:["WEBM","MP4","AVI","MOV","FLV","OGG","WMV","MKV"],imgExtList:["JPEG","JPG","PNG","GIF","WEBP","SVG"],audExtList:["MP3","WAV","M4A","WMA","AAC","FLAC"]}},computed:{isUrlsValid(){const e=this.items.filter((e=>e.url&&this.$validator.isURL(e.url)));return e.length===this.items.length}},methods:{manageItems(e){e>0?this.items.splice(e,1):this.items.push({url:"http://"})},getFileTypeByUrl(e){const t=e.split(".").pop();if(t){if(this.docExtList.includes(t.toUpperCase()))return o.Tr.DOCUMENT.value;if(this.vidExtList.includes(t.toUpperCase()))return o.Tr.VIDEO.value;if(this.imgExtList.includes(t.toUpperCase()))return o.Tr.IMAGE.value;if(this.audExtList.includes(t.toUpperCase()))return o.Tr.AUDIO.value}return o.Tr.OTHERS.value},validate(){if(this.isUrlsValid){let e=!0;const t=[];for(let a=0;a<this.items.length;a++){const i=this.getFileTypeByUrl(this.items[a].url),l=!this.acceptImages&&i==o.Tr.IMAGE.value||!this.acceptVideos&&i==o.Tr.VIDEO.value||!this.acceptAudios&&i==o.Tr.AUDIO.value||!this.acceptDocuments&&i==o.Tr.DOCUMENT.value||!this.acceptOtherTypes&&i==o.Tr.OTHERS.value;l&&this.$message.error(this.$t("fileFormatNotAllowed",[this.items[a].url])),e&&l&&(e=!1),t.push(this.items[a].url)}if(!e)return;this.$emit("validate",this.multiple?t:t[0],this.multiple)}}}},r=a(83744);const d=(0,r.Z)(s,[["render",l],["__scopeId","data-v-47880409"]]);var n=d,c=a(71561),u=a(39494);const p={class:"text-left"},h={class:"text-right"},m={key:0,class:"mt-5 text-center"},f={class:"item-selector"},g={class:"image-slot"},y={key:1,class:"item-doc"},V={class:"item-doc-center"},w={class:"item-doc-footer"},C={key:2,class:"item-aud"},v={class:"item-aud-center"},x={class:"item-aud-footer"},N={key:3,class:"item-vid"},b={class:"item-vid-center"},k={class:"item-vid-footer"},E={key:4,class:"item-oth"},D={class:"item-oth-center"},I={class:"item-oth-footer"},$={class:"text-center"},_={key:1,class:"no-medias-container mt-5"},S={class:"text-center"},B={class:"text-left item-actions-container"},T={class:"text-center"},M={id:"music",preload:"all",autoplay:"",controls:"",style:{width:"100%"}},A=["src"],L={id:"video",autoplay:"",controls:"",style:{width:"100%"}},U=["src"],F={class:"dialog-footer"};function O(e,t,a,l,o,s){const r=(0,i.resolveComponent)("el-option"),d=(0,i.resolveComponent)("el-select"),n=(0,i.resolveComponent)("el-input"),O=(0,i.resolveComponent)("el-col"),z=(0,i.resolveComponent)("el-button"),P=(0,i.resolveComponent)("el-row"),R=(0,i.resolveComponent)("el-card"),Y=(0,i.resolveComponent)("loading"),G=(0,i.resolveComponent)("el-icon"),H=(0,i.resolveComponent)("el-checkbox"),Z=(0,i.resolveComponent)("Picture"),W=(0,i.resolveComponent)("el-image"),q=(0,i.resolveComponent)("font-awesome-icon"),J=(0,i.resolveComponent)("infinite-loading"),X=u.Z,K=(0,i.resolveComponent)("el-divider"),j=(0,i.resolveComponent)("el-table-column"),Q=(0,i.resolveComponent)("el-table"),ee=(0,i.resolveComponent)("el-image-viewer"),te=(0,i.resolveComponent)("el-dialog"),ae=c.Z;return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createVNode)(R,{shadow:"never",class:"mb-10 header-card"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(P,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(O,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",p,[(0,i.createVNode)(d,{modelValue:o.mediaType,"onUpdate:modelValue":t[0]||(t[0]=e=>o.mediaType=e),placeholder:e.$t("mediaType"),style:{width:"165px"},class:"mr-10"},{default:(0,i.withCtx)((()=>[a.showImages&&a.showVideos&&a.showAudios&&a.showDocuments&&a.showOtherTypes?((0,i.openBlock)(),(0,i.createBlock)(r,{key:0,label:e.$t("allMedias"),value:0},null,8,["label"])):(0,i.createCommentVNode)("",!0),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(o.mediaTypes,(e=>((0,i.openBlock)(),(0,i.createBlock)(r,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue","placeholder"]),(0,i.createVNode)(d,{modelValue:o.mediaDate,"onUpdate:modelValue":t[1]||(t[1]=e=>o.mediaDate=e),style:{width:"165px"},class:"mr-10"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{label:e.$t("allDates"),value:0},null,8,["label"]),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(o.mediaDates,(e=>((0,i.openBlock)(),(0,i.createBlock)(r,{key:e,value:e,label:e},null,8,["value","label"])))),128))])),_:1},8,["modelValue"]),(0,i.createVNode)(n,{modelValue:o.mediaSearch,"onUpdate:modelValue":t[2]||(t[2]=e=>o.mediaSearch=e),class:"mr-10",style:{width:"185px"},placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])),_:1}),(0,i.createVNode)(O,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",h,[(0,i.createVNode)(z,{size:"default",icon:"refresh-right",onClick:t[3]||(t[3]=e=>s.reset())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("reload")),1)])),_:1}),(0,i.createVNode)(z,{class:"ml-10",size:"default",type:"primary",icon:"check",disabled:!o.selectedMedias.length,onClick:t[4]||(t[4]=e=>s.validate())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("validateSelection")),1)])),_:1},8,["disabled"])])])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(P,{gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(O,{span:16},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(R,{shadow:"never",class:"medias-card"},{default:(0,i.withCtx)((()=>[o.isLoading?((0,i.openBlock)(),(0,i.createElementBlock)("div",m,[(0,i.createVNode)(G,{class:"is-loading",color:e.appPrimaryColor,size:40},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(Y)])),_:1},8,["color"])])):((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:1},[s.filteredMedias&&s.filteredMedias.length>0?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:0},[(0,i.createVNode)(P,{gutter:10,class:"mt-5"},{default:(0,i.withCtx)((()=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.filteredMedias,((t,a)=>((0,i.openBlock)(),(0,i.createBlock)(O,{key:a,span:4,class:"mb-10 item-container",onClick:e=>s.updateSelectedMedias(t,a)},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",f,[(0,i.createVNode)(H,{size:"default","model-value":o.selectedMedias.findIndex((e=>e.id===t.id))>-1,onChange:e=>s.updateSelectedMedias(t,a)},null,8,["model-value","onChange"])]),t.type==o.MediaTypes.IMAGE.value?((0,i.openBlock)(),(0,i.createBlock)(W,{key:0,class:"item-img",src:e.resolveMediaLink(t.link),fit:"cover"},{error:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",g,[(0,i.createVNode)(G,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(Z)])),_:1})])])),_:2},1032,["src"])):t.type==o.MediaTypes.DOCUMENT.value?((0,i.openBlock)(),(0,i.createElementBlock)("div",y,[(0,i.createElementVNode)("div",V,[(0,i.createVNode)(q,{icon:"file",class:"item-doc-icon",size:"4x"}),(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(t.name.split(".").pop().toUpperCase()),1)]),(0,i.createElementVNode)("div",w,[(0,i.createElementVNode)("small",null,(0,i.toDisplayString)(t.name),1)])])):t.type==o.MediaTypes.AUDIO.value?((0,i.openBlock)(),(0,i.createElementBlock)("div",C,[(0,i.createElementVNode)("div",v,[(0,i.createVNode)(q,{icon:"music",class:"item-aud-icon",size:"4x"}),(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(t.name.split(".").pop().toUpperCase()),1)]),(0,i.createElementVNode)("div",x,[(0,i.createElementVNode)("small",null,(0,i.toDisplayString)(t.name),1)])])):t.type==o.MediaTypes.VIDEO.value?((0,i.openBlock)(),(0,i.createElementBlock)("div",N,[(0,i.createElementVNode)("div",b,[(0,i.createVNode)(q,{icon:"video",class:"item-vid-icon",size:"4x"}),(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(t.name.split(".").pop().toUpperCase()),1)]),(0,i.createElementVNode)("div",k,[(0,i.createElementVNode)("small",null,(0,i.toDisplayString)(t.name),1)])])):((0,i.openBlock)(),(0,i.createElementBlock)("div",E,[(0,i.createElementVNode)("div",D,[(0,i.createVNode)(q,{icon:"question-circle",class:"item-oth-icon",size:"4x"}),(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(t.name.split(".").pop().toUpperCase()),1)]),(0,i.createElementVNode)("div",I,[(0,i.createElementVNode)("small",null,(0,i.toDisplayString)(t.name),1)])]))])),_:2},1032,["onClick"])))),128))])),_:1}),(0,i.createVNode)(J,{onInfinite:s.infiniteHandler},{"no-more":(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("noOtherMediaFound")),1)])),"no-results":(0,i.withCtx)((()=>[(0,i.createTextVNode)(".")])),spinner:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",$,[(0,i.createVNode)(G,{class:"is-loading",color:e.appPrimaryColor,size:40},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(Y)])),_:1},8,["color"])])])),error:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("somethingWrong"))+". ",1),(0,i.createElementVNode)("a",{href:"javascript:;",onClick:t[5]||(t[5]=t=>e.location.reload())},(0,i.toDisplayString)(e.$t("retry")),1)])),_:1},8,["onInfinite"])],64)):((0,i.openBlock)(),(0,i.createElementBlock)("div",_,[(0,i.createElementVNode)("div",S,[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.$t("noMediaFound")),1)])]))],64))])),_:1})])),_:1}),(0,i.createVNode)(O,{span:8},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(R,{shadow:"never",class:"media-info-card"},{default:(0,i.withCtx)((()=>[o.detailsData.length?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:0},[(0,i.createElementVNode)("div",B,[(0,i.createVNode)(z,{icon:"view",size:"small",type:"primary",onClick:t[6]||(t[6]=e=>s.showPreview(o.currentItem,o.currentItemIndex))},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("preview")),1)])),_:1}),(0,i.createVNode)(X,{"to-copy":e.resolveMediaLink(o.currentItem.link),class:"link-copy-btn",onCopy:s.copyLink},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(z,{icon:"link",size:"small",type:"success"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("copyLink")),1)])),_:1})])),_:1},8,["to-copy","onCopy"]),o.currentItem.type==o.MediaTypes.IMAGE.value?((0,i.openBlock)(),(0,i.createBlock)(z,{key:0,icon:"edit",size:"small",type:"warning",onClick:t[7]||(t[7]=e=>o.imageEditorVisible=!0)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("edit")),1)])),_:1})):(0,i.createCommentVNode)("",!0)]),(0,i.createVNode)(K),(0,i.createVNode)(Q,{data:o.detailsData,"show-header":!1,stripe:"",size:"default",style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(j,{prop:"name",label:"",width:"100"}),(0,i.createVNode)(j,{prop:"value",label:""})])),_:1},8,["data"]),(0,i.createVNode)(K),(0,i.createElementVNode)("div",T,[(0,i.createVNode)(z,{icon:"delete",size:"default",type:"danger",onClick:t[8]||(t[8]=e=>s.deleteItem())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("delete")),1)])),_:1})])],64)):(0,i.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1}),o.showViewer?((0,i.openBlock)(),(0,i.createBlock)(ee,{key:0,infinite:!1,"hide-on-click-modal":!0,"url-list":s.filteredMediaLinks,"initial-index":o.currentItemIndex,onClose:t[9]||(t[9]=e=>o.showViewer=!1)},null,8,["url-list","initial-index"])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(te,{modelValue:o.showAudioReaderDialog,"onUpdate:modelValue":t[10]||(t[10]=e=>o.showAudioReaderDialog=e),width:"35%","show-close":"","destroy-on-close":"",title:o.currentItem?o.currentItem.name:"",top:"30vh"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("audio",M,[(0,i.createElementVNode)("source",{src:e.resolveMediaLink(o.currentItem.link)},null,8,A)])])),_:1},8,["modelValue","title"]),(0,i.createVNode)(te,{modelValue:o.showVideoReaderDialog,"onUpdate:modelValue":t[11]||(t[11]=e=>o.showVideoReaderDialog=e),width:"45%","show-close":"","destroy-on-close":"",title:o.currentItem?o.currentItem.name:"",top:"10vh"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("video",L,[(0,i.createElementVNode)("source",{src:e.resolveMediaLink(o.currentItem.link)},null,8,U)])])),_:1},8,["modelValue","title"]),(0,i.createVNode)(te,{modelValue:o.imageEditorVisible,"onUpdate:modelValue":t[17]||(t[17]=e=>o.imageEditorVisible=e),"destroy-on-close":"",top:"1vh"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(ae,{"cropper-ratio":null,"round-preview":!1,src:o.currentItem?e.resolveMediaLink(o.currentItem.link):null,onCancel:t[12]||(t[12]=e=>o.imageEditorVisible=!1),onSave:s.storeEditedPicture},null,8,["src","onSave"]),(0,i.createVNode)(te,{modelValue:o.imageEditorConfirmVisible,"onUpdate:modelValue":t[16]||(t[16]=e=>o.imageEditorConfirmVisible=e),width:"50%",title:e.$t("confirmation"),"append-to-body":""},{footer:(0,i.withCtx)((()=>[(0,i.createElementVNode)("span",F,[(0,i.createVNode)(z,{size:"default",onClick:t[13]||(t[13]=e=>o.imageEditorConfirmVisible=!1)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("cancel")),1)])),_:1}),(0,i.createVNode)(z,{type:"primary",size:"default",onClick:t[14]||(t[14]=e=>s.saveEditedPicture(!1))},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("saveNewFile")),1)])),_:1}),(0,i.createVNode)(z,{type:"danger",size:"default",onClick:t[15]||(t[15]=e=>s.saveEditedPicture(!0))},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("overwriteExistingFile")),1)])),_:1})])])),default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("whatDoYouWantToDo"))+" ",1)])),_:1},8,["modelValue","title"])])),_:1},8,["modelValue"])],64)}var z=a(39355),P=a(11165),R=a(92829),Y=a(98761),G=a(64713),H=a(21101),Z={name:"MediaLibrary",mixins:[Y.Z],props:{multiple:{type:Boolean,default:!1},limit:{type:Number,default:0},showImages:{type:Boolean,default:!0},showVideos:{type:Boolean,default:!0},showAudios:{type:Boolean,default:!0},showDocuments:{type:Boolean,default:!0},showOtherTypes:{type:Boolean,default:!0},baseUrl:{type:String,default:P.STORAGE_API_BASE_URL},folder:{type:String,default:"medias"},initSelectedMedias:{type:Array,default:null}},emits:["validate"],data(){return{MediaTypes:o.Tr,users:[],medias:[],mediaDate:0,mediaType:0,mediaTypes:[],mediaDates:[],detailsData:[],mediaSearch:"",isLoading:!0,showViewer:!1,currentItem:null,lastMediaRowId:0,selectedMedias:[],currentItemIndex:0,imageEditorVisible:!1,currentEditorDataUrl:null,showAudioReaderDialog:!1,showVideoReaderDialog:!1,imageEditorConfirmVisible:!1}},computed:{filteredMedias(){let e=[];const t=this.medias.filter((e=>0==this.mediaType||e.type==this.mediaType));e=this.mediaSearch?t.filter((e=>e.name.toLowerCase().includes(this.mediaSearch.toLowerCase()))):t;const a=e.filter((e=>0==this.mediaDate||this.extractDatetimeMonthYear(e.insert_datetime)==this.mediaDate));return a},filteredMediaLinks(){const e=[];return this.filteredMedias.forEach((t=>{t.type==o.Tr.IMAGE.value&&e.push(this.resolveMediaLink(t.link))})),e}},watch:{medias:{handler(e,t){this.loadMediaDates()},deep:!0}},created(){this.$_.forIn(o.Tr,((e,t)=>{this.showImages&&e.value==o.Tr.IMAGE.value&&this.mediaTypes.push(e),this.showAudios&&e.value==o.Tr.AUDIO.value&&this.mediaTypes.push(e),this.showVideos&&e.value==o.Tr.VIDEO.value&&this.mediaTypes.push(e),this.showOtherTypes&&e.value==o.Tr.OTHERS.value&&this.mediaTypes.push(e),this.showDocuments&&e.value==o.Tr.DOCUMENT.value&&this.mediaTypes.push(e)})),this.mediaType=this.showImages&&this.showVideos&&this.showAudios&&this.showDocuments&&this.showOtherTypes?0:this.mediaTypes[0].value,this.init()},methods:{...(0,H.mapActions)("media",["getMediasPage","deleteMedia","generateThumbnail"]),...(0,H.mapActions)("user",["getAllUsers"]),async init(){const e=await this.getAllUsers();e.data&&(this.users=e.data);let t=null;const a=await this.getMediasPage({offset:this.lastMediaRowId,limit:18});return a.success&&a.data?(t=a.data,this.lastMediaRowId+=t.length,this.medias.push(...t),t.forEach((e=>{this.initSelectedMedias&&this.initSelectedMedias.includes(e.link)&&this.selectedMedias.push(e)}))):this.$message.error(this.$t("anErrorOccured")),this.isLoading&&(this.isLoading=!1),t?t.length:0},async infiniteHandler(e){const t=await this.init();t>0?e.loaded():e.complete()},loadMediaDates(){this.mediaDates=[],this.medias.forEach((e=>{const t=this.extractDatetimeMonthYear(e.insert_datetime);this.mediaDates.includes(t)||this.mediaDates.push(t)}))},extractDatetimeMonthYear(e){if(!e)return"";let t=(0,z.bK)(e.split(" ")[0],{outPattern:"DD MMMM YYYY",locale:this.$i18n.locale});return t=t.split(" "),(0,R.fm)(t[1])+" "+t[2]},showPreview(e,t){this.currentItem=e,this.currentItemIndex=t,e.type==o.Tr.IMAGE.value&&(this.showViewer=!0),e.type==o.Tr.DOCUMENT.value&&window.open(this.resolveMediaLink(e.link)),e.type==o.Tr.AUDIO.value&&(this.showAudioReaderDialog=!0),e.type==o.Tr.VIDEO.value&&(this.showVideoReaderDialog=!0),e.type==o.Tr.OTHERS.value&&this.$message.warning(this.$t("cannotOpenThisFile"))},loadDetails(e,t){this.currentItem=e,this.currentItemIndex=t;const a=this.mediaTypes.find((t=>t.value==e.type)),i=(0,z.bK)(e.insert_datetime.split(" ")[0],{outPattern:"DD MMMM YYYY",locale:this.$i18n.locale}),l=this.users.find((t=>t.id==e.sender));if(this.detailsData=[{name:this.$t("name"),value:e.name},{name:this.$t("url"),value:this.resolveMediaLink(e.link)},{name:this.$t("type"),value:a?a.label:""},{name:this.$t("size"),value:(0,R.gB)(e.size,!0)},{name:this.$t("mimeType"),value:e.mime},{name:this.$t("sentBy"),value:l?l.name:""},{name:this.$t("date"),value:i}],e.type==o.Tr.IMAGE.value){var s=new Image;s.onload=()=>{const e=s.naturalHeight,t=s.naturalWidth;t&&e&&this.detailsData.length&&this.detailsData.push({name:this.$t("dimensions"),value:t+" x "+e})},s.src=this.resolveMediaLink(e.link)}},async reset(){this.isLoading=!0,this.medias=[],this.detailsData=[],this.selectedMedias=[],this.lastMediaRowId=0,await this.init()},copyLink(e,t){t&&this.$message.success(this.$t("mediaLinkCopied"))},updateSelectedMedias(e,t){const a=this.selectedMedias.findIndex((t=>t.id===e.id));a>-1?(this.selectedMedias.splice(a,1),this.detailsData=[]):(this.multiple?this.selectedMedias.push(e):this.selectedMedias=[e],this.loadDetails(e,t))},deleteItem(){this.$confirm(this.$t("deleteMediaQuestion"),this.$t("delete"),{confirmButtonText:this.$t("yes"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((async()=>{const e=await this.deleteMedia({id:this.currentItem.id});e.success?(this.$message.success(this.$t("success")),this.reset()):this.$message.error(this.$t("anErrorOccured"))})).catch((()=>{}))},validate(){this.$emit("validate",this.multiple?this.selectedMedias:this.selectedMedias[0],this.multiple)},storeEditedPicture(e,t){this.currentEditorDataUrl=t,this.imageEditorConfirmVisible=!0},async saveEditedPicture(e){if(this.currentEditorDataUrl){var t=(0,R.Bo)(this.currentEditorDataUrl,{filename:this.$uuidv4()+".png",type:"image/png"});this.compressImages&&(t=await(0,R.hv)(t,{maxSizeMB:this.compressThreshold}));const i=e?this.currentItem.name:t.name,l=new FormData;l.append("folder",this.folder),l.append("overwrite",e),l.append("file",t,i);try{const a=await this.axios.post(this.baseUrl,l,{headers:P.API_REQUEST_HEADERS});a.data&&"success"==a.data["status"]?(e&&await this.deleteMedia({id:this.currentItem.id}),await this.addItemInDB({context:G.R,data:{name:i,link:"root/"+this.folder+"/"+i,type:o.Tr.IMAGE.value,size:t.size||0,mime:t.type||"",sender:this.userData.id}}),await this.generateThumbnail({autoWidth:this.thumbnailsFormat==o.vh.AUTOWIDTH.value,autoHeight:this.thumbnailsFormat==o.vh.AUTOHEIGHT.value,folder:this.folder,file:i,lib:this.imgProcessingLib,models:this.thumbnails.filter((e=>e.label&&e.width&&e.height))}),this.imageEditorConfirmVisible=!1,this.imageEditorVisible=!1,await this.reset()):this.$message.error(this.$t("anErrorOccured"))}catch(a){this.$message.error(this.$t("anErrorOccured"))}}}}};const W=(0,r.Z)(Z,[["render",O],["__scopeId","data-v-0bb993f2"]]);var q=W;const J={class:"text-right"},X={class:"mr-10"},K={class:"mr-5"},j={key:0,class:"mb-10"},Q={key:0,class:"text-left"},ee={class:"text-right"},te={class:"el-upload__text mt-10"};function ae(e,t,a,l,o,s){const r=(0,i.resolveComponent)("el-switch"),d=(0,i.resolveComponent)("el-button"),n=(0,i.resolveComponent)("el-col"),c=(0,i.resolveComponent)("el-row"),u=(0,i.resolveComponent)("el-card"),p=(0,i.resolveComponent)("el-progress"),h=(0,i.resolveComponent)("UploadFilled"),m=(0,i.resolveComponent)("el-icon"),f=(0,i.resolveComponent)("el-upload");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[o.fileList&&o.fileList.length?((0,i.openBlock)(),(0,i.createBlock)(u,{key:0,class:"mb-10 header-card",shadow:"never"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",J,[(0,i.createElementVNode)("span",X,[(0,i.createElementVNode)("b",K,[(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.$t("overwriteDuplicateFiles")),1)]),(0,i.createVNode)(r,{modelValue:o.overwrite,"onUpdate:modelValue":t[0]||(t[0]=e=>o.overwrite=e),"active-color":e.appPrimaryColor,size:"default"},null,8,["modelValue","active-color"])]),(0,i.createVNode)(d,{size:"default",icon:"close",disabled:o.isUploading,class:"ml-10",onClick:t[1]||(t[1]=e=>s.clearFileList())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("clearList")),1)])),_:1},8,["disabled"]),(0,i.createVNode)(d,{size:"default",type:"primary",icon:"upload",disabled:o.isUploading,onClick:t[2]||(t[2]=e=>s.send())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("send")+" ("+o.fileList.length+")"),1)])),_:1},8,["disabled"])])])),_:1})])),_:1})])),_:1})):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(u,{shadow:"never"},{default:(0,i.withCtx)((()=>[o.isUploading?((0,i.openBlock)(),(0,i.createElementBlock)("div",j,[(0,i.createVNode)(c,{gutter:10,class:"mb-10"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{span:12},{default:(0,i.withCtx)((()=>[o.uploadedFileName?((0,i.openBlock)(),(0,i.createElementBlock)("div",Q,(0,i.toDisplayString)(e.$t("sendingInProgress")+": "+o.uploadedFileName),1)):(0,i.createCommentVNode)("",!0)])),_:1}),(0,i.createVNode)(n,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",ee,(0,i.toDisplayString)(o.uploadedList.length+o.failedList.length+" / "+o.fileList.length),1)])),_:1})])),_:1}),(0,i.createVNode)(p,{percentage:o.percentage,format:s.format},null,8,["percentage","format"])])):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(f,{ref:"upload",class:"upload-box","auto-upload":!1,"file-list":o.fileList,"on-change":s.handleChange,"on-remove":s.handleChange,headers:a.headers,action:a.baseUrl,multiple:"",drag:""},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{class:"upload-icon",size:64},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h)])),_:1}),(0,i.createElementVNode)("div",te,(0,i.toDisplayString)(e.$t("uploadFilesOrClickToSend")),1)])),_:1},8,["file-list","on-change","on-remove","headers","action"])])),_:1})],64)}var ie={name:"UploadFiles",mixins:[Y.Z],props:{folder:{type:String,default:"medias"},maxUploadSize:{type:Number,default:256},baseUrl:{type:String,default:P.STORAGE_API_BASE_URL},headers:{type:Object,default:P.API_REQUEST_HEADERS},acceptImages:{type:Boolean,default:!0},acceptVideos:{type:Boolean,default:!0},acceptAudios:{type:Boolean,default:!0},acceptDocuments:{type:Boolean,default:!0},acceptOtherTypes:{type:Boolean,default:!0}},data(){return{fileList:[],percentage:0,failedList:[],uploadedList:[],overwrite:!0,isUploading:!1,uploadedFileName:"",docExtList:["DOC","DOCX","HTML","HTM","ODT","PDF","XLS","XLSX","ODS","PPT","PPTX","TXT"],vidExtList:["WEBM","MP4","AVI","MOV","FLV","OGG","WMV","MKV"],imgExtList:["JPEG","JPG","PNG","GIF","WEBP","SVG"],audExtList:["MP3","WAV","M4A","WMA","AAC","FLAC"]}},computed:{acceptedExtensions(){const e=[];return this.acceptImages&&this.acceptAudios&&this.acceptVideos&&this.acceptDocuments&&this.acceptOtherTypes?"*":(this.acceptImages&&this.imgExtList.forEach((t=>{e.push("."+t.toLowerCase())})),this.acceptAudios&&this.audExtList.forEach((t=>{e.push("."+t.toLowerCase())})),this.acceptVideos&&this.vidExtList.forEach((t=>{e.push("."+t.toLowerCase())})),this.acceptDocuments&&this.docExtList.forEach((t=>{e.push("."+t.toLowerCase())})),e.join(", "))}},methods:{...(0,H.mapActions)("media",["generateThumbnail"]),format(e){return 100===e?this.$t("completed"):`${e}%`},handleChange(e,t){this.fileList=t},getFileTypeByName(e){const t=e.split(".").pop();if(t){if(this.docExtList.includes(t.toUpperCase()))return o.Tr.DOCUMENT.value;if(this.vidExtList.includes(t.toUpperCase()))return o.Tr.VIDEO.value;if(this.imgExtList.includes(t.toUpperCase()))return o.Tr.IMAGE.value;if(this.audExtList.includes(t.toUpperCase()))return o.Tr.AUDIO.value}return o.Tr.OTHERS.value},async send(){let e=!0;for(let i=0;i<this.fileList.length;i++){const t=this.fileList[i].size/1024/1024<this.maxUploadSize;t||(e=!1,this.$message.error(this.$t("uploadFileSizeWarning",[this.fileList[i].name,this.maxUploadSize])));const a=this.getFileTypeByName(this.fileList[i].name),l=!this.acceptImages&&a==o.Tr.IMAGE.value||!this.acceptVideos&&a==o.Tr.VIDEO.value||!this.acceptAudios&&a==o.Tr.AUDIO.value||!this.acceptDocuments&&a==o.Tr.DOCUMENT.value||!this.acceptOtherTypes&&a==o.Tr.OTHERS.value;l&&this.$message.error(this.$t("fileFormatNotAllowed",[this.fileList[i].name])),e&&l&&(e=!1)}if(e){this.isUploading=!0;for(let e=0;e<this.fileList.length;e++){const i=this.fileList[e].name;var t=this.fileList[e].raw;this.compressImages&&(t=await(0,R.hv)(t,{maxSizeMB:this.compressThreshold}));const l=new FormData;l.append("folder",this.folder),l.append("overwrite",this.overwrite),l.append("file",t,i);try{this.percentage=0,this.uploadedFileName=this.fileList[e].name;const a=await this.axios.post(this.baseUrl,l,{headers:this.headers,onUploadProgress:e=>{null!==e.total&&(this.percentage=Math.round(100*e.loaded/e.total))}});a.data&&"success"==a.data["status"]?(this.uploadedList.push(this.fileList[e].name),await this.addItemInDB({context:G.R,data:{name:i,link:"root/"+this.folder+"/"+i,type:this.getFileTypeByName(i),size:t.size||0,mime:t.type||"",sender:this.userData.id}}),this.getFileTypeByName(i)==o.Tr.IMAGE.value&&await this.generateThumbnail({autoWidth:this.thumbnailsFormat==o.vh.AUTOWIDTH.value,autoHeight:this.thumbnailsFormat==o.vh.AUTOHEIGHT.value,folder:this.folder,file:i,lib:this.imgProcessingLib,models:this.thumbnails.filter((e=>e.label&&e.width&&e.height))})):a.data&&"exists"==a.data["status"]?(this.failedList.push(this.fileList[e].name),this.$message({type:"error",duration:5e3,showClose:!0,message:this.$t("fileExistsError",[this.fileList[e].name])})):(this.failedList.push(this.fileList[e].name),this.$message.error(this.$t("fileSendingError",[this.fileList[e].name])))}catch(a){this.failedList.push(this.fileList[e].name),this.$message.error(this.$t("fileSendingError",[this.fileList[e].name]))}this.uploadedFileName=""}setTimeout((()=>{this.$message({showClose:!0,duration:5e3,message:this.$t("sendingCompleted",[this.uploadedList.length,this.failedList.length])}),this.clearFileList(),this.isUploading=!1}),1e3)}},clearFileList(){this.fileList=[],this.failedList=[],this.uploadedList=[]}}};const le=(0,r.Z)(ie,[["render",ae],["__scopeId","data-v-66d0394a"]]);var oe=le;function se(e,t,a,l,o,s){const r=oe,d=(0,i.resolveComponent)("el-tab-pane"),c=q,u=n,p=(0,i.resolveComponent)("el-tabs");return(0,i.openBlock)(),(0,i.createBlock)(p,{modelValue:o.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>o.tab=e),type:"card",onTabClick:s.handleClick},{default:(0,i.withCtx)((()=>[a.enableUploadFiles?((0,i.openBlock)(),(0,i.createBlock)(d,{key:0,label:e.$t("uploadFiles"),name:"1"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(r,{"max-upload-size":a.uploadConfig.maxUploadSize,"base-url":a.uploadConfig.baseUrl,folder:a.uploadConfig.folder,"accept-images":a.displayImages,"accept-videos":a.displayVideos,"accept-audios":a.displayAudios,"accept-documents":a.displayDocuments,"accept-other-types":a.displayOtherTypes},null,8,["max-upload-size","base-url","folder","accept-images","accept-videos","accept-audios","accept-documents","accept-other-types"])])),_:1},8,["label"])):(0,i.createCommentVNode)("",!0),a.enableMediaLibrary?((0,i.openBlock)(),(0,i.createBlock)(d,{key:1,label:e.$t("mediaLibrary"),name:"2"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(c,{limit:a.limit,multiple:a.multiple,"show-images":a.displayImages,"show-videos":a.displayVideos,"show-audios":a.displayAudios,"show-documents":a.displayDocuments,"show-other-types":a.displayOtherTypes,"init-selected-medias":a.initSelectedMedias,onValidate:s.validateSelection},null,8,["limit","multiple","show-images","show-videos","show-audios","show-documents","show-other-types","init-selected-medias","onValidate"])])),_:1},8,["label"])):(0,i.createCommentVNode)("",!0),a.enableAddFromAnUrl?((0,i.openBlock)(),(0,i.createBlock)(d,{key:2,label:e.$t("addFromAnUrl"),name:"3"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(u,{limit:a.limit,multiple:a.multiple,"accept-images":a.displayImages,"accept-videos":a.displayVideos,"accept-audios":a.displayAudios,"accept-documents":a.displayDocuments,"accept-other-types":a.displayOtherTypes,onValidate:s.validateLinks},null,8,["limit","multiple","accept-images","accept-videos","accept-audios","accept-documents","accept-other-types","onValidate"])])),_:1},8,["label"])):(0,i.createCommentVNode)("",!0)])),_:1},8,["modelValue","onTabClick"])}var re={name:"MediaPicker",components:{UploadFiles:oe,MediaLibrary:q,AddFromAnUrl:n},props:{enableUploadFiles:{type:Boolean,default:!0},enableMediaLibrary:{type:Boolean,default:!0},enableAddFromAnUrl:{type:Boolean,default:!0},displayImages:{type:Boolean,default:!0},displayVideos:{type:Boolean,default:!0},displayAudios:{type:Boolean,default:!0},displayDocuments:{type:Boolean,default:!0},displayOtherTypes:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},limit:{type:Number,default:0},uploadConfig:{type:Object,default:()=>({folder:"medias",maxUploadSize:256,baseUrl:P.STORAGE_API_BASE_URL})},currentTab:{type:String,default:"2"},initSelectedMedias:{type:Array,default:null},enableSelectionDetails:{type:Boolean,default:!1}},emits:["selected"],data(){return{tab:this.currentTab}},methods:{handleClick(){},validateSelection(e,t){if(t){const t=[];e.forEach((e=>{this.enableSelectionDetails?t.push(e):t.push(e.link)})),this.$emit("selected",t)}else this.$emit("selected",this.enableSelectionDetails?e:e.link)},validateLinks(e,t){t?this.$emit("selected",e):this.$emit("selected",e[0])}}};const de=(0,r.Z)(re,[["render",se],["__scopeId","data-v-ce9c6404"]]);var ne=de},38246:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var i=a(82234);const l={class:"text-left"},o={class:"text-right"},s={key:0,class:"mt-2"},r={style:{color:"red"}},d={style:{"text-align":"center","margin-top":"20px",display:"flex"}};function n(e,t,a,n,c,u){const p=(0,i.resolveComponent)("el-col"),h=(0,i.resolveComponent)("el-button"),m=(0,i.resolveComponent)("el-row"),f=(0,i.resolveComponent)("el-divider"),g=(0,i.resolveComponent)("el-input"),y=(0,i.resolveComponent)("el-select"),V=(0,i.resolveComponent)("el-checkbox"),w=(0,i.resolveComponent)("el-popover"),C=(0,i.resolveComponent)("el-table-column"),v=(0,i.resolveComponent)("el-tag"),x=(0,i.resolveComponent)("el-popconfirm"),N=(0,i.resolveComponent)("el-table"),b=(0,i.resolveComponent)("el-pagination"),k=(0,i.resolveComponent)("el-card"),E=(0,i.resolveDirective)("loading");return(0,i.openBlock)(),(0,i.createBlock)(k,{shadow:"hover"},{header:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{align:"middle"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",l,[(0,i.createElementVNode)("h3",null,(0,i.toDisplayString)(e.$t("adsIds")),1)])])),_:1}),(0,i.createVNode)(p,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",o,[(0,i.createVNode)(w,{placement:"left-start",width:350,trigger:"click",onShow:t[4]||(t[4]=e=>c.errorMessage="")},{reference:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{size:"default",icon:"plus",type:"primary"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("add")),1)])),_:1})])),default:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{span:24,style:{display:"flex","justify-content":"space-between","align-items":"center"}},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("small",null,[(0,i.createElementVNode)("b",null,(0,i.toDisplayString)(e.$t("addAdId")),1)]),(0,i.createVNode)(h,{size:"small",type:"primary",icon:"check",onClick:t[0]||(t[0]=e=>u.submit())},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("validate")),1)])),_:1})])),_:1})])),_:1}),(0,i.createVNode)(f),(0,i.createVNode)(m,{gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(g,{modelValue:c.currentAddItem.id,"onUpdate:modelValue":t[1]||(t[1]=e=>c.currentAddItem.id=e),size:"default",placeholder:e.$t("id")},null,8,["modelValue","placeholder"]),c.errorMessage?((0,i.openBlock)(),(0,i.createElementBlock)("div",s,[(0,i.createElementVNode)("small",r,(0,i.toDisplayString)(c.errorMessage),1)])):(0,i.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,i.createVNode)(m,{gutter:10,class:"mt-10"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(y,{modelValue:c.currentAddItem.params,"onUpdate:modelValue":t[2]||(t[2]=e=>c.currentAddItem.params=e),style:{width:"100%"},size:"default",multiple:"",filterable:"","allow-create":"","tag-type":"warning","default-first-option":"","suffix-icon":"setting","reserve-keyword":!1,placeholder:e.$t("addSettings"),"no-data-text":e.$t("addAndClickOnEnter"),"no-match-text":e.$t("addAndClickOnEnter")},null,8,["modelValue","placeholder","no-data-text","no-match-text"])])),_:1})])),_:1}),(0,i.createVNode)(m,{gutter:10,class:"mt-5"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(V,{modelValue:c.currentAddItem.reusable,"onUpdate:modelValue":t[3]||(t[3]=e=>c.currentAddItem.reusable=e),"true-label":1,"false-label":0,label:e.$t("reusableId"),size:"default"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("small",null,(0,i.toDisplayString)(e.$t("reusableId")),1)])),_:1},8,["modelValue","label"])])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1})])),default:(0,i.withCtx)((()=>[(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(N,{data:u.pagedTableData,"empty-text":e.$t("noData"),border:"",stripe:"",style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(C,{type:"index",index:u.indexMethod},null,8,["index"]),(0,i.createVNode)(C,{sortable:"",label:e.$t("id")},{default:(0,i.withCtx)((a=>[c.currentEditItem&&c.currentEditItem.fakeId===a.row.fakeId?((0,i.openBlock)(),(0,i.createBlock)(m,{key:0,gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(g,{modelValue:c.currentEditItem.id,"onUpdate:modelValue":t[5]||(t[5]=e=>c.currentEditItem.id=e),style:{width:"100%"},placeholder:e.$t("id")},null,8,["modelValue","placeholder"])])),_:1})])),_:1})):((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:1},[(0,i.createTextVNode)((0,i.toDisplayString)(a.row.id),1)],64))])),_:1},8,["label"]),(0,i.createVNode)(C,{label:e.$t("type")},{default:(0,i.withCtx)((a=>[c.currentEditItem&&c.currentEditItem.fakeId===a.row.fakeId?((0,i.openBlock)(),(0,i.createBlock)(m,{key:0,gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(V,{modelValue:c.currentEditItem.reusable,"onUpdate:modelValue":t[6]||(t[6]=e=>c.currentEditItem.reusable=e),"true-label":1,"false-label":0,label:e.$t("reusableId"),size:"default"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("small",null,(0,i.toDisplayString)(e.$t("reusableId")),1)])),_:1},8,["modelValue","label"])])),_:1})])),_:1})):((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:1},[parseInt(a.row.reusable)?((0,i.openBlock)(),(0,i.createBlock)(v,{key:0,type:"info"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("reusable")),1)])),_:1})):((0,i.openBlock)(),(0,i.createBlock)(v,{key:1},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("nonReusable")),1)])),_:1}))],64))])),_:1},8,["label"]),(0,i.createVNode)(C,{label:e.$t("settings")},{default:(0,i.withCtx)((a=>[c.currentEditItem&&c.currentEditItem.fakeId===a.row.fakeId?((0,i.openBlock)(),(0,i.createBlock)(m,{key:0,gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{span:24},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(y,{modelValue:c.currentEditItem.params,"onUpdate:modelValue":t[7]||(t[7]=e=>c.currentEditItem.params=e),style:{width:"100%"},size:"default",multiple:"",filterable:"","allow-create":"","tag-type":"warning","default-first-option":"","suffix-icon":"setting","reserve-keyword":!1,placeholder:e.$t("addSettings"),"no-data-text":e.$t("addAndClickOnEnter"),"no-match-text":e.$t("addAndClickOnEnter")},null,8,["modelValue","placeholder","no-data-text","no-match-text"])])),_:1})])),_:1})):((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,{key:1},(0,i.renderList)(JSON.parse(a.row.params),((e,t)=>((0,i.openBlock)(),(0,i.createBlock)(v,{key:t,type:"success",class:"mr-5 mb-5"},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e),1)])),_:2},1024)))),128))])),_:1},8,["label"]),(0,i.createVNode)(C,{align:"right",width:"250"},{header:(0,i.withCtx)((()=>[(0,i.createVNode)(g,{modelValue:c.search,"onUpdate:modelValue":t[8]||(t[8]=e=>c.search=e),size:"small",placeholder:e.$t("search"),style:{width:"100%"}},null,8,["modelValue","placeholder"])])),default:(0,i.withCtx)((a=>[c.currentEditItem&&c.currentEditItem.fakeId===a.row.fakeId?((0,i.openBlock)(),(0,i.createBlock)(m,{key:0,gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{size:"small",icon:"close",type:"default",style:{width:"100%"},onClick:t[9]||(t[9]=e=>c.currentEditItem=null)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("cancel")),1)])),_:1})])),_:1}),(0,i.createVNode)(p,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{size:"small",icon:"check",type:"success",style:{width:"100%"},onClick:e=>u.submitEdit(a.$index,a.row)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("validate")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):((0,i.openBlock)(),(0,i.createBlock)(m,{key:1,gutter:10},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(p,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{size:"small",icon:"edit",type:"warning",style:{width:"100%"},onClick:e=>u.editItem(a.$index,a.row)},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,i.createVNode)(p,{span:12},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(x,{width:300,"cancel-button-text":e.$t("no"),"confirm-button-text":e.$t("yes"),title:e.$t("deleteAdIdQuestion"),onConfirm:e=>u.deleteItem(a.$index,a.row)},{reference:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{size:"small",type:"danger",icon:"delete",style:{width:"100%"}},{default:(0,i.withCtx)((()=>[(0,i.createTextVNode)((0,i.toDisplayString)(e.$t("delete")),1)])),_:1})])),_:2},1032,["cancel-button-text","confirm-button-text","title","onConfirm"])])),_:2},1024)])),_:2},1024))])),_:1})])),_:1},8,["data","empty-text"])),[[E,c.isLoading]]),(0,i.createElementVNode)("div",d,[(0,i.createVNode)(b,{background:"",style:{margin:"0 auto"},layout:"prev, pager, next","hide-on-single-page":!0,"page-size":c.pageSize,total:c.total,onCurrentChange:u.setPage},null,8,["page-size","total","onCurrentChange"])])])),_:1})}var c=a(46962),u=a.n(c),p=a(39355),h=a(31567),m=a(98761),f=a(38855),g=a(21101),y={name:"Identifiers",mixins:[f.Z,h.Z,m.Z],data(){return{errorMessage:"",currentAddItem:{id:"",reusable:0,params:[]},currentEditItem:null,uploadDialog:!1,isLoading:!1,tableData:[],pageSize:6,search:"",total:0,page:1}},computed:{pagedTableData(){return this.total=this.searching.length,this.searching.slice(this.pageSize*this.page-this.pageSize,this.pageSize*this.page)},searching(){return this.search?(this.page=1,this.tableData.filter((e=>e.id.toLowerCase().includes(this.search.toLowerCase())))):(this.total=this.tableData.length,this.tableData)}},watch:{"currentAddItem.id":{handler(e){e&&(this.currentAddItem.id=u()(e,{trim:!0,lower:!0,strict:!0}))}},"currentEditItem.id":{handler(e){e&&(this.currentEditItem.id=u()(e,{trim:!0,lower:!0,strict:!0}))}}},created(){this.init()},methods:{...(0,g.mapActions)("ad",["getAllIdentifiers","addIdentifier","updateIdentifier","deleteIdentifier"]),reformatDate:p.bK,setPage(e){this.page=e},indexMethod(e){return e+(this.page-1)*this.pageSize+1},async init(){this.isLoading=!0;const e=await this.getAllIdentifiers();e.data&&(this.tableData=e.data.reverse().map((e=>({...e,fakeId:this.$uuidv4()})))),e.failure&&this.$message.error(this.$t("anErrorOccured")),this.isLoading=!1},editItem(e,t){this.currentEditItem=this.$_.cloneDeep(t),this.currentEditItem.params=JSON.parse(t.params),this.currentEditItem.reusable=parseInt(t.reusable)},async submitEdit(e,t){if(!this.currentEditItem||!this.currentEditItem.id)return;if(t.id!=this.currentEditItem.id&&this.tableData.findIndex((e=>e.id==this.currentEditItem.id))>-1)return void this.$message.warning(this.$t("idAlreadyExists"));const a=await this.updateIdentifier({id:t.id,data:{id:this.currentEditItem.id,reusable:this.currentEditItem.reusable,params:JSON.stringify(this.currentEditItem.params)}});a.success?(this.currentEditItem=null,this.init()):this.$message.error(this.$t("anErrorOccured"))},async deleteItem(e,t){const a=await this.deleteIdentifier(t.id);a.success?this.init():this.$message.error(this.$t("anErrorOccured"))},async submit(){if(this.errorMessage="",!this.currentAddItem.id)return void(this.errorMessage=this.$t("fieldRequired"));if(this.tableData.findIndex((e=>e.id==this.currentAddItem.id))>-1)return void this.$message.warning(this.$t("idAlreadyExists"));const e=await this.addIdentifier({id:this.currentAddItem.id,reusable:this.currentAddItem.reusable,params:JSON.stringify(this.currentAddItem.params)});e.success?(this.init(),this.currentAddItem={id:"",reusable:0,params:[]},this.$message.success(this.$t("success"))):this.$message.error(this.$t("anErrorOccured"))}}},V=a(83744);const w=(0,V.Z)(y,[["render",n]]);var C=w},44502:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var i=a(68716),l=a(30780),o=(a(57658),a(82234));const s={class:"text-left"},r={class:"text-right"},d={class:"image-slot"},n={style:{"text-align":"center","margin-top":"20px",display:"flex"}},c={style:{float:"left"}},u={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"12px"}},p={class:"card-header"},h={class:"img-preview-container"},m={class:"image-slot"},f={key:1};function g(e,t,a,g,y,V){const w=(0,o.resolveComponent)("el-col"),C=(0,o.resolveComponent)("el-button"),v=(0,o.resolveComponent)("el-row"),x=(0,o.resolveComponent)("el-table-column"),N=(0,o.resolveComponent)("Picture"),b=(0,o.resolveComponent)("el-icon"),k=(0,o.resolveComponent)("el-image"),E=(0,o.resolveComponent)("el-tag"),D=(0,o.resolveComponent)("el-input"),I=(0,o.resolveComponent)("el-table"),$=(0,o.resolveComponent)("el-pagination"),_=(0,o.resolveComponent)("el-card"),S=(0,o.resolveComponent)("el-divider"),B=(0,o.resolveComponent)("el-form-item"),T=(0,o.resolveComponent)("el-option"),M=(0,o.resolveComponent)("el-select"),A=(0,o.resolveComponent)("el-date-picker"),L=(0,o.resolveComponent)("el-radio-button"),U=(0,o.resolveComponent)("el-radio-group"),F=l.Z,O=(0,o.resolveComponent)("Delete"),z=(0,o.resolveComponent)("el-form"),P=(0,o.resolveComponent)("el-dialog"),R=i.Z,Y=(0,o.resolveDirective)("loading");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(_,{shadow:"hover"},{header:(0,o.withCtx)((()=>[(0,o.createVNode)(v,{align:"middle"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{span:12},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("h3",null,(0,o.toDisplayString)(e.$t("adsManagement")),1)])])),_:1}),(0,o.createVNode)(w,{span:12},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",r,[e.devMode?((0,o.openBlock)(),(0,o.createBlock)(C,{key:0,size:"default",icon:"tickets",onClick:t[0]||(t[0]=t=>e.$router.push(y.Routes.AD.PATH+"/identifiers"))},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("adsIds")),1)])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(C,{size:"default",type:"primary",icon:"plus",onClick:t[1]||(t[1]=e=>V.addItem())},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("add")),1)])),_:1})])])),_:1})])),_:1})])),default:(0,o.withCtx)((()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(I,{data:V.pagedTableData,"empty-text":e.$t("noData"),border:"",stripe:"",style:{width:"100%"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(x,{type:"index",index:V.indexMethod,width:"50",fixed:""},null,8,["index"]),(0,o.createVNode)(x,{sortable:"",label:e.$t("preview"),prop:"content",width:"200",fixed:""},{default:(0,o.withCtx)((t=>[(0,o.createVNode)(k,{src:e.resolveMediaLink(t.row.content)},{error:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",d,[(0,o.createVNode)(b,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(N)])),_:1})])])),_:2},1032,["src"])])),_:1},8,["label"]),(0,o.createVNode)(x,{sortable:"",label:e.$t("title"),prop:"title",width:"175",fixed:""},null,8,["label"]),(0,o.createVNode)(x,{sortable:"",label:e.$t("id"),prop:"pid",width:"175"},{default:(0,o.withCtx)((e=>[(0,o.createElementVNode)("small",null,(0,o.toDisplayString)(e.row.pid),1)])),_:1},8,["label"]),(0,o.createVNode)(x,{sortable:"",label:e.$t("status"),prop:"display",width:"125"},{default:(0,o.withCtx)((t=>[parseInt(t.row.display)?((0,o.openBlock)(),(0,o.createBlock)(E,{key:0,type:"success"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("published")),1)])),_:1})):((0,o.openBlock)(),(0,o.createBlock)(E,{key:1,type:"danger"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("unpublished")),1)])),_:1}))])),_:1},8,["label"]),(0,o.createVNode)(x,{sortable:"",label:e.$t("broadcastStart"),width:"180"},{default:(0,o.withCtx)((t=>[(0,o.createTextVNode)((0,o.toDisplayString)(V.reformatDate(t.row.broadcast_start,{inPattern:"YYYY-MM-DD",outPattern:e.dateFormat,locale:e.$i18n.locale})),1)])),_:1},8,["label"]),(0,o.createVNode)(x,{sortable:"",label:e.$t("broadcastEnd"),width:"180"},{default:(0,o.withCtx)((t=>[(0,o.createTextVNode)((0,o.toDisplayString)(V.reformatDate(t.row.broadcast_end,{inPattern:"YYYY-MM-DD",outPattern:e.dateFormat,locale:e.$i18n.locale})),1)])),_:1},8,["label"]),(0,o.createVNode)(x,{sortable:"",label:e.$t("addedOn"),width:"160"},{default:(0,o.withCtx)((t=>[(0,o.createTextVNode)((0,o.toDisplayString)(V.reformatDate(t.row.insert_datetime,{inPattern:"YYYY-MM-DD HH:mm:ss",outPattern:e.dateFormat+" - HH:mm",locale:e.$i18n.locale})),1)])),_:1},8,["label"]),(0,o.createVNode)(x,{align:"right",width:"250",fixed:"right"},{header:(0,o.withCtx)((()=>[(0,o.createVNode)(D,{modelValue:y.search,"onUpdate:modelValue":t[2]||(t[2]=e=>y.search=e),size:"small",placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])),default:(0,o.withCtx)((t=>[(0,o.createVNode)(v,{gutter:10},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{span:12},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(C,{size:"small",type:"warning",icon:"edit",onClick:e=>V.editItem(t.$index,t.row)},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("edit")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,o.createVNode)(w,{span:12},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(C,{size:"small",type:"danger",icon:"delete",onClick:e=>V.deleteItem(t.$index,t.row)},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:1})])),_:1},8,["data","empty-text"])),[[Y,y.isLoading]]),(0,o.createElementVNode)("div",n,[(0,o.createVNode)($,{background:"",style:{margin:"0 auto"},layout:"prev, pager, next","hide-on-single-page":!0,"page-size":y.pageSize,total:y.total,onCurrentChange:V.setPage},null,8,["page-size","total","onCurrentChange"])])])),_:1}),(0,o.createVNode)(P,{modelValue:y.adDialog,"onUpdate:modelValue":t[10]||(t[10]=e=>y.adDialog=e),"show-close":!1,fullscreen:"","destroy-on-close":""},{header:(0,o.withCtx)((()=>[(0,o.createVNode)(v,{align:"middle"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{span:12,class:"text-left"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("h3",null,(0,o.toDisplayString)(y.currentEditItem?e.$t("editAd"):e.$t("addAd")),1)])),_:1}),(0,o.createVNode)(w,{span:12,class:"text-right"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(C,{type:"primary",size:"default",icon:"check",onClick:t[3]||(t[3]=e=>V.submitForm(y.currentEditItem?"editForm":"addForm"))},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("save")),1)])),_:1}),(0,o.createVNode)(C,{type:"default",size:"default",icon:"close",onClick:t[4]||(t[4]=e=>V.cancelForm(y.currentEditItem?"editForm":"addForm"))},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("close")),1)])),_:1})])),_:1})])),_:1}),(0,o.createVNode)(S)])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(z,{ref:y.currentEditItem?"editForm":"addForm",model:y.ad,rules:y.rules,"label-width":"250px","label-position":"left","hide-required-asterisk":""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(v,{gutter:20},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{span:14},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(B,{prop:"title",label:e.$t("title")},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(D,{modelValue:y.ad.title,"onUpdate:modelValue":t[5]||(t[5]=e=>y.ad.title=e),placeholder:e.$t("title"),style:{width:"100%"}},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,o.createVNode)(B,{prop:"pid",label:e.$t("adId")},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(M,{modelValue:y.ad.pid,"onUpdate:modelValue":t[6]||(t[6]=e=>y.ad.pid=e),filterable:"",placeholder:e.$t("select"),"no-data-text":e.$t("noData"),"no-match-text":e.$t("noMatchingData"),style:{width:"100%"},onChange:V.updateAdData},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(y.adsIds,(t=>((0,o.openBlock)(),(0,o.createBlock)(T,{key:t.id,value:t.id,label:t.id},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",c,(0,o.toDisplayString)(t.id),1),(0,o.createElementVNode)("span",u,(0,o.toDisplayString)(parseInt(t.reusable)?e.$t("reusable"):e.$t("nonReusable")),1)])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue","placeholder","no-data-text","no-match-text","onChange"])])),_:1},8,["label"]),(0,o.createVNode)(B,{prop:"broadcastRange",label:e.$t("date")},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(A,{modelValue:y.ad.broadcastRange,"onUpdate:modelValue":t[7]||(t[7]=e=>y.ad.broadcastRange=e),type:"daterange","unlink-panels":!0,"range-separator":e.$t("to"),"start-placeholder":e.$t("broadcastStart"),"end-placeholder":e.$t("broadcastEnd"),style:{width:"100%"}},null,8,["modelValue","range-separator","start-placeholder","end-placeholder"])])),_:1},8,["label"]),(0,o.createVNode)(B,{prop:"display",label:e.$t("status")},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(U,{modelValue:y.ad.display,"onUpdate:modelValue":t[8]||(t[8]=e=>y.ad.display=e),class:"ad-display"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{label:0},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("unpublished")),1)])),_:1}),(0,o.createVNode)(L,{label:1},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$t("published")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,o.createVNode)(B,{prop:"data"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F,{list:y.ad.data,"name-readonly":!0,"add-btn-disabled":!0,"delete-btn-disabled":!0,title:e.$t("customFields"),"name-placeholder":e.$t("label"),style:{width:"100%"}},null,8,["list","title","name-placeholder"])])),_:1})])),_:1}),(0,o.createVNode)(w,{span:10},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(_,{class:"ad-uploader-container",shadow:"never"},{header:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("b",null,(0,o.toDisplayString)(e.$t("adContent")),1),y.ad.content?((0,o.openBlock)(),(0,o.createBlock)(b,{key:0,title:e.$t("clear"),class:"delete-icon",onClick:V.clearContent},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(O)])),_:1},8,["title","onClick"])):(0,o.createCommentVNode)("",!0)])])),default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",h,[(0,o.createElementVNode)("div",{class:"img-preview",onClick:t[9]||(t[9]=e=>y.pickerVisible=!0)},[y.ad.content?((0,o.openBlock)(),(0,o.createBlock)(k,{key:0,style:{width:"100%",height:"100%"},src:e.resolveMediaLink(y.ad.content),fit:"contain"},{error:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",m,[(0,o.createVNode)(b,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(N)])),_:1})])])),_:1},8,["src"])):((0,o.openBlock)(),(0,o.createElementBlock)("span",f,(0,o.toDisplayString)(e.$t("select")),1))])])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,o.createVNode)(P,{modelValue:y.pickerVisible,"onUpdate:modelValue":t[11]||(t[11]=e=>y.pickerVisible=e),title:e.$t("adContent"),"destroy-on-close":"","append-to-body":"",fullscreen:"",top:"1vh"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(R,{"display-videos":!1,"display-audios":!1,"display-documents":!1,"display-other-types":!1,"enable-add-from-an-url":!1,onSelected:V.saveContent},null,8,["onSelected"])])),_:1},8,["modelValue","title"])],64)}var y=a(39355),V=a(14340),w=a(31567),C=a(98761),v=a(38855),x=a(86886),N=a(21101),b={name:"Ad",mixins:[v.Z,w.Z,C.Z],data(){return{Routes:V.Z5,adsIds:[],ad:{pid:"",data:[],title:"",content:"",display:0,broadcastRange:""},rules:{pid:[{required:!0,message:this.$t("fieldRequired"),trigger:"blur"}],title:[{required:!0,message:this.$t("fieldRequired"),trigger:"blur"}],content:[{required:!0,message:this.$t("fieldRequired"),trigger:"blur"}],display:[{required:!0,message:this.$t("fieldRequired"),trigger:"blur"}],broadcastRange:[{required:!0,message:this.$t("fieldRequired"),trigger:"blur"}]},currentStoFolder:"ads",currentEditItem:null,pickerVisible:!1,isLoading:!1,adDialog:!1,tableData:[],pageSize:6,search:"",total:0,page:1}},computed:{pagedTableData(){return this.total=this.searching.length,this.searching.slice(this.pageSize*this.page-this.pageSize,this.pageSize*this.page)},searching(){return this.search?(this.page=1,this.tableData.filter((e=>e.title.toLowerCase().includes(this.search.toLowerCase())||e.pid.toLowerCase().includes(this.search.toLowerCase())||e.broadcast_start.toLowerCase().includes(this.search.toLowerCase())||e.broadcast_end.toLowerCase().includes(this.search.toLowerCase())))):(this.total=this.tableData.length,this.tableData)}},created(){this.init()},methods:{...(0,N.mapActions)("ad",["getAllIdentifiers","getAllAds"]),reformatDate:y.bK,setPage(e){this.page=e},indexMethod(e){return e+(this.page-1)*this.pageSize+1},async init(){this.isLoading=!0;const e=await this.getAllIdentifiers();e.data&&(this.adsIds=e.data);const t=await this.getAllAds();t.data&&(this.tableData=t.data),t.failure&&this.$message.error(this.$t("unableToUpdateData")),this.isLoading=!1},addItem(){this.currentEditItem=null,this.ad.pid="",this.ad.data=[],this.ad.title="",this.ad.content="",this.ad.display=0,this.ad.broadcastRange="",this.updateAdData(),this.adDialog=!0},editItem(e,t){this.currentEditItem=t,this.ad.pid=t.pid,this.ad.data=JSON.parse(t.data),this.ad.title=t.title,this.ad.content=t.content,this.ad.display=parseInt(t.display);const a=t.broadcast_start.split("-"),i=t.broadcast_end.split("-");3===a.length&&3===i.length&&(this.ad.broadcastRange=[new Date(a[0],parseInt(a[1])-1,a[2]),new Date(i[0],parseInt(i[1])-1,i[2])]),this.updateAdData(),this.adDialog=!0},deleteItem(e,t){this.$confirm(this.$t("deleteAdQuestion"),this.$t("delete"),{confirmButtonText:this.$t("yes"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((async()=>{const e=await this.deleteItemInDB({context:x.q,id:t.id});e.success?(this.$message.success(this.$t("success")),this.init()):this.$message.error(this.$t("anErrorOccured"))})).catch((()=>{}))},clearContent(){this.ad.content=""},async saveContent(e){this.ad.content=e,this.pickerVisible=!1},submitForm(e){this.$refs[e].validate((async t=>{if(!t)return!1;{const t=this.adsIds.find((e=>e.id==this.ad.pid));if("addForm"===e){if(this.tableData.findIndex((e=>e.pid==this.ad.pid))>-1&&!parseInt(t?.reusable))return this.$message.error(this.$t("samePidError")),!1;const e=await this.addItemInDB({context:x.q,data:{pid:this.ad.pid,title:this.ad.title,content:this.ad.content,display:this.ad.display,data:JSON.stringify(this.ad.data),broadcast_start:(0,y.p6)(this.ad.broadcastRange[0],{outPattern:"YYYY-MM-DD"}),broadcast_end:(0,y.p6)(this.ad.broadcastRange[1],{outPattern:"YYYY-MM-DD"})}});e.success?this.$message.success(this.$t("success")):this.$message.error(this.$t("anErrorOccured"))}else{if(this.currentEditItem.pid!==this.ad.pid&&this.tableData.findIndex((e=>e.pid==this.ad.pid))>-1&&!parseInt(t?.reusable))return this.$message.error(this.$t("samePidError")),!1;const e={};this.currentEditItem.pid!==this.ad.pid&&(e["pid"]=this.ad.pid),this.currentEditItem.title!==this.ad.title&&(e["title"]=this.ad.title),this.currentEditItem.content!==this.ad.content&&(e["content"]=this.ad.content),this.currentEditItem.display!=this.ad.display&&(e["display"]=this.ad.display),this.currentEditItem.data!==JSON.stringify(this.ad.data)&&(e["data"]=JSON.stringify(this.ad.data));const a=(0,y.p6)(this.ad.broadcastRange[0],{outPattern:"YYYY-MM-DD"}),i=(0,y.p6)(this.ad.broadcastRange[1],{outPattern:"YYYY-MM-DD"});if(this.currentEditItem.broadcast_start!==a&&(e["broadcast_start"]=a),this.currentEditItem.broadcast_end!==i&&(e["broadcast_end"]=i),!this.$_.isEmpty(e)){const t=await this.updateItemInDB({context:x.q,id:this.currentEditItem.id,data:e});t.success?this.$message.success(this.$t("success")):this.$message.error(this.$t("anErrorOccured"))}}this.cancelForm(e),this.init()}}))},cancelForm(e){this.$refs[e].resetFields(),this.adDialog=!1},updateAdData(){if(this.ad.data=[],this.ad.pid){const e=this.adsIds.find((e=>e.id==this.ad.pid));e&&JSON.parse(e.params).forEach((e=>{const t={name:e,value:""};if(this.currentEditItem){const a=JSON.parse(this.currentEditItem.data).find((t=>t.name==e));a&&(t.value=a.value)}this.ad.data.push(t)}))}}}},k=a(83744);const E=(0,k.Z)(b,[["render",g],["__scopeId","data-v-3368e3f2"]]);var D=E},31567:function(e,t,a){var i=a(14340),l=a(21101);t["Z"]={created(){const e=-1===this.restrictedScopes.findIndex((e=>this.$route.name.includes(e.value)));e||this.$router.replace(i.Z5.LOGIN.PATH)},computed:{...(0,l.mapState)({userData:e=>e.session.userData,accessList:e=>e.access.accessList}),...(0,l.mapGetters)({userScopes:"access/getUserScopes",restrictedScopes:"access/getUserRestrictedScopes",disabledModuleScopes:"access/getDisabledModuleScopes",userPageScopes:"access/getUserPageScopes",userActionScopes:"access/getUserActionScopes",userSectionScopes:"access/getUserSectionScopes",userPageScope:"access/getUserPageScope",userActionScope:"access/getUserActionScope",userSectionScope:"access/getUserSectionScope"})},methods:{...(0,l.mapActions)("access",["getAllAccess"]),getAccessName(e){const t=this.accessList.find((t=>t.id==e));return t?t.name:""}}}},38855:function(e,t,a){a(57658);var i=a(39355),l=a(14340),o=a(20747),s=a(21101);t["Z"]={data(){return{Routes:l.Z5,Currencies:l.Kt,WebsiteInfo:l.a,currencies:[]}},async created(){this.$_.forIn(l.Kt,((e,t)=>{this.currencies.push(e)})),this.$store.commit("global/updateCurrentPanelPath",this.$route.path,{root:!0});const e=await this.getItemFromDB({context:o.A,id:this.userData?.id});e.success&&e.data&&e.data.status==l.dp.DISABLED&&(this.destroySession(),this.$router.replace(l.Z5.LOGIN.PATH))},computed:{...(0,s.mapState)({userData:e=>e.session.userData}),...(0,s.mapGetters)({isUserConnected:"session/isUserConnected",getSettingValue:"setting/getSettingValue"})},methods:{formatDate:i.p6,reformatDate:i.bK,...(0,s.mapMutations)({destroySession:"session/destroySession"})}}}}]);
//# sourceMappingURL=group-ad.ff728390.js.map